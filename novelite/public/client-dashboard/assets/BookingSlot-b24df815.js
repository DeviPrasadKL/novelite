import{c as P,_ as j,b as G,r as v,u as K,a as X,j as i,z as R,y as pe,a5 as ue,ah as ge,ai as me,aj as fe,ak as be}from"./index-823b022a.js";import{P as ye}from"./PageContainer-db55db03.js";import{B as he}from"./Breadcrumb-93b54820.js";import{C as Y}from"./ChildCard-080cdf9e.js";import{u as ve,G as xe}from"./Grid-a39c5cca.js";import{B as Se}from"./Box-f450242b.js";import{a as Z,g as ee,s as te,B as Ce,c as A,b as oe,T as Q}from"./Typography-454d25c7.js";import{k as Te,Q as V}from"./ReactToastify-6a6da3f0.js";import{F as $e,b as ke,S as Be}from"./Select-4c10c709.js";import{M as Re}from"./MenuItem-03f3b582.js";import{b as De}from"./Button-bebdfeaa.js";import{S as Me}from"./Stack-a34d30c4.js";import{u as Ne}from"./useDispatch-4fcf8e16.js";import"./index.esm-dee14f6e.js";import"./useSlotProps-a9cb2fea.js";import"./Link-4730aa4a.js";import"./Box-db97eb53.js";import"./Card-9cc5a94c.js";import"./Paper-d556631a.js";import"./CardHeader-077a946b.js";import"./Divider-673036ff.js";import"./CardContent-bf6a0fa7.js";import"./clsx.m-1229b3e0.js";import"./Modal-1031b0bd.js";import"./useControlled-6bcba167.js";import"./createStack-66c402e7.js";import"./styled-02668bb8.js";function je(e){return ee("MuiToggleButton",e)}const _e=Z("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),q=_e,ze=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],Oe=e=>{const{classes:o,fullWidth:r,selected:a,disabled:c,size:f,color:x}=e,b={root:["root",a&&"selected",c&&"disabled",r&&"fullWidth",`size${P(f)}`,x]};return oe(b,je,o)},We=te(Ce,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.root,o[`size${P(r.size)}`]]}})(({theme:e,ownerState:o})=>{let r=o.color==="standard"?e.palette.text.primary:e.palette[o.color].main,a;return e.vars&&(r=o.color==="standard"?e.vars.palette.text.primary:e.vars.palette[o.color].main,a=o.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[o.color].mainChannel),j({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},o.fullWidth&&{width:"100%"},{[`&.${q.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:G(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${q.selected}`]:{color:r,backgroundColor:e.vars?`rgba(${a} / ${e.vars.palette.action.selectedOpacity})`:G(r,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${a} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:G(r,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${a} / ${e.vars.palette.action.selectedOpacity})`:G(r,e.palette.action.selectedOpacity)}}}},o.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},o.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),Ie=v.forwardRef(function(o,r){const a=K({props:o,name:"MuiToggleButton"}),{children:c,className:f,color:x="standard",disabled:b=!1,disableFocusRipple:h=!1,fullWidth:n=!1,onChange:s,onClick:p,selected:T,size:g="medium",value:D}=a,_=X(a,ze),$=j({},a,{color:x,disabled:b,disableFocusRipple:h,fullWidth:n,size:g}),M=Oe($),z=l=>{p&&(p(l,D),l.defaultPrevented)||s&&s(l,D)};return i.jsx(We,j({className:A(M.root,f),disabled:b,focusRipple:!h,ref:r,onClick:z,onChange:s,value:D,ownerState:$,"aria-pressed":T},_,{children:c}))}),we=Ie;function Fe(e,o){return o===void 0||e===void 0?!1:Array.isArray(o)?o.indexOf(e)>=0:e===o}function Le(e){return ee("MuiToggleButtonGroup",e)}const Ge=Z("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth"]),C=Ge,Pe=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],Ee=e=>{const{classes:o,orientation:r,fullWidth:a,disabled:c}=e,f={root:["root",r==="vertical"&&"vertical",a&&"fullWidth"],grouped:["grouped",`grouped${P(r)}`,c&&"disabled"]};return oe(f,Le,o)},Ue=te("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[{[`& .${C.grouped}`]:o.grouped},{[`& .${C.grouped}`]:o[`grouped${P(r.orientation)}`]},o.root,r.orientation==="vertical"&&o.vertical,r.fullWidth&&o.fullWidth]}})(({ownerState:e,theme:o})=>j({display:"inline-flex",borderRadius:(o.vars||o).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${C.grouped}`]:j({},e.orientation==="horizontal"?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${C.selected} + .${C.grouped}.${C.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${C.selected} + .${C.grouped}.${C.selected}`]:{borderTop:0,marginTop:0}})})),Ae=v.forwardRef(function(o,r){const a=K({props:o,name:"MuiToggleButtonGroup"}),{children:c,className:f,color:x="standard",disabled:b=!1,exclusive:h=!1,fullWidth:n=!1,onChange:s,orientation:p="horizontal",size:T="medium",value:g}=a,D=X(a,Pe),_=j({},a,{disabled:b,fullWidth:n,orientation:p,size:T}),$=Ee(_),M=(l,N)=>{if(!s)return;const O=g&&g.indexOf(N);let W;g&&O>=0?(W=g.slice(),W.splice(O,1)):W=g?g.concat(N):[N],s(l,W)},z=(l,N)=>{s&&s(l,g===N?null:N)};return i.jsx(Ue,j({role:"group",className:A($.root,f),ref:r,ownerState:_},D,{children:v.Children.map(c,l=>v.isValidElement(l)?v.cloneElement(l,{className:A($.grouped,l.props.className),onChange:h?z:M,selected:l.props.selected===void 0?Fe(l.props.value,g):l.props.selected,size:l.props.size||T,fullWidth:n,color:l.props.color||x,disabled:l.props.disabled||b}):null)}))}),He=Ae;function Je({slotsData:e,selectedSlots:o,setSelectedSlots:r,intervals:a}){const c=ve(),f=n=>{const[s,p]=n.split(":").map(Number);return s*60+p},x=n=>n.sort((s,p)=>{const T=f(s.split(" - ")[0]),g=f(p.split(" - ")[0]);return T-g}),b=n=>{let s=[];return e==null||e.forEach(p=>{s=s.concat(p.booking_timings.split(","))}),s==null?void 0:s.some(p=>p===n)},h=(n,s)=>{const p=x(s);console.log(p),r(p)};return i.jsx(Se,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(3, 1fr)",md:"repeat(8, 1fr)",ls:"repeat(9, 1fr)"},gap:"16px"},children:(a==null?void 0:a.length)!==0&&a.map((n,s)=>i.jsx(He,{value:o,onChange:h,"aria-label":"text formatting",children:i.jsxs(we,{value:n,disabled:b(n),variant:"contained",sx:{width:"100%",border:(c.palette.mode==="dark","1px solid grey"),color:c.palette.mode==="dark"?"white":"black","&.Mui-selected":{backgroundColor:c.palette.mode==="dark"?"#154c79":"#5462D6",color:"white",boxShadow:c.palette.mode==="dark"?"2px 2px 2px black":"2px 2px 2px grey"},"&.Mui-disabled":{backgroundColor:"rgba(0, 0, 0, 0.12)",color:(c.palette.mode==="dark","grey")}},children:[n.split("-")[0]," - ",n.split("-")[1]]},s)},n+s))})}function xt(){const[e,o]=v.useState(`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`),[r,a]=v.useState([]),[c,f]=v.useState([]),[x,b]=v.useState(""),h=R(t=>t.bookingsSliceReducer.roomName),n=R(t=>t.bookingsSliceReducer.roomCategory),s=R(t=>t.bookingsSliceReducer.bookingLocation),p=R(t=>t.novelprofileReducer.account_type),T=R(t=>t.novelprofileReducer.companyName),g=R(t=>t.novelprofileReducer.location),D=R(t=>t.novelprofileReducer.leadsID),_=pe(),$=Ne();let M=30,z=7;const l=[{to:"/dashboard",title:"Home"},{to:"/location",title:"Location"},{to:"/category",title:"Category"},{to:"/bookings",title:h},{to:"/bookingslot",title:"Booking Slots"}],O=R(t=>t.bookingsSliceReducer.price)/2*r.length,W=O*(18/100),re=O+W;v.useEffect(()=>{const t=[],d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let S=0;S<z;S++){const u=new Date;u.setDate(u.getDate()+S);const B=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}-${String(u.getDate()).padStart(2,"0")}`,m=`${String(u.getDate()).padStart(2,"0")}-${k[u.getMonth()]}`,y=d[u.getDay()];t.push({date:B,day:y,formattedDate:m})}f(t),b(t[0].day)},[z]);const ae=t=>V.warn(t,{toastId:"warn"}),se=t=>V.error(t,{toastId:"error"});let E="",w="",H=[];const{data:U}=ue("Room Booking Settings","Room Booking Settings"),{data:J,isLoading:ie}=ge("/novelite.api.api.getAllData");let F;if(J&&(F=Object.values(J.message.reduce((t,{name:d,room:k,from_time:S,to_time:u,booking_date:B})=>(t[d]?t[d].booking_timings+=`,${S} - ${u}`:t[d]={name:d,room:k,booking_timings:`${S} - ${u}`,booking_date:B},t),{})),F=F.filter(t=>t.room===h&&t.booking_date===e)),c.length!==0){let t=U==null?void 0:U.availability_of_slots.find(d=>d.day_of_week==x);E=t==null?void 0:t.from_time,w=t==null?void 0:t.to_time,w==="23:59:59"&&(w="24:00:00")}if(E!==void 0&&w!==void 0){const t=m=>{var L;const[y,I]=(L=m==null?void 0:m.split(":"))==null?void 0:L.map(Number);return y*60+I},d=m=>{const y=Math.floor(m/60)%24,I=m%60;return`${String(y).padStart(2,"0")}:${String(I).padStart(2,"0")}`},k=t(E),u=t(w)-k,B=Math.floor(u/M);for(let m=0;m<B;m++){const y=k+m*M,I=y+M,L=I>=1440?0:I;H.push(`${d(y)} - ${d(L)}`)}}const ne=t=>{a([]),b(t.day),o(t.date)},{call:le}=me("/novelite.api.api.addDataToDoc"),ce=()=>{let t=`${r}`,d=`${D}-${g}`,[k,S,u]=e.split("-"),B=`${k}-${S}-${u}`,m={location:s,room:h,price:re,room_type:n,customer:T,client_type:p,booking_date:B,customer_lead_id:d,booking_timings:t,booking_status:"Blocked Temporarily"};r.length!==0?le(m).then(()=>{$(fe(r)),$(be(B)),a([]),_("/payment_summary")}).catch(y=>{se(y.message),console.log("inside catch "+JSON.stringify(y.message))}):ae("Please Select any slot to continue")};function de(t){if(Number.isInteger(t)){let d=t.toString();return d.length>3?d.slice(0,-3)+","+d.slice(-3):d}else return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}return i.jsxs(ye,{title:"Book Slots - Novel Office",children:[i.jsx(he,{title:"Booking Slots",items:l}),i.jsxs($e,{sx:{minWidth:130,mb:2,mr:4},children:[i.jsx(ke,{id:"demo-simple-select-label",children:"Select Date"}),i.jsx(Be,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:e,label:"Select Date",children:c==null?void 0:c.map(t=>i.jsx(Re,{value:t.date,onClick:()=>ne(t),children:t.formattedDate},t.date))})]}),!ie&&i.jsx(Je,{slotsData:F,intervals:H,selectedSlots:r,setSelectedSlots:a}),i.jsxs(xe,{item:!0,xs:12,lg:6,display:"flex",alignItems:"stretch",mt:2,children:[i.jsx(Y,{title:"",children:i.jsx(De,{variant:"contained",color:"primary",onClick:ce,children:"Proceed"})}),i.jsx(Y,{title:"",children:i.jsxs(Me,{children:[i.jsxs(Q,{variant:"h4",mb:.5,children:["Price : ₹ ",de(O)]}),i.jsx(Q,{variant:"h6",color:"primary",children:"(* GST not included)"})]})})]}),i.jsx(Te,{position:"top-center",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})}export{xt as default};
