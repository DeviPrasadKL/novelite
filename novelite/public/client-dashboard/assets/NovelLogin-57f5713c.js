var D=Object.defineProperty,T=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var w=(i,t,r)=>t in i?D(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,g=(i,t)=>{for(var r in t||(t={}))_.call(t,r)&&w(i,r,t[r]);if(N)for(var r of N(t))q.call(t,r)&&w(i,r,t[r]);return i},f=(i,t)=>T(i,A(t));import{u as J,q as R,r as u,j as e,f as L,bU as I}from"./index-4c0b60c1.js";import{P as Z}from"./PageContainer-1e378f9f.js";import{C as m}from"./CustomFormLabel-cc03e477.js";import{C as c}from"./CustomTextField-d841ae48.js";import{L as H}from"./Logo-dc4c2930.js";import{k as M,Q as x}from"./ReactToastify-7b7ec94e.js";import{C as Q}from"./CustomOutlinedInput-2497971b.js";import{aR as V,M as X}from"./index.esm-ab86738a.js";import{B as a}from"./Box-4e6b8719.js";import{G as S}from"./Grid-858c8d28.js";import{C as $}from"./Card-93702703.js";import{T as K}from"./Typography-d41e00bf.js";import{S as E}from"./Stack-8a0c4542.js";import{B as P}from"./Button-7b1b6ba5.js";import{I as Y}from"./InputAdornment-dda3dbbd.js";import{I as ee}from"./IconButton-deace95f.js";import{u as te}from"./useDispatch-cfa82895.js";import"./TextField-2386fcf6.js";import"./FormControl-05733a9f.js";import"./utils-5ebfb48b.js";import"./useFormControl-4a8d5a10.js";import"./isMuiElement-06cc0e9d.js";import"./useId-ab6b636f.js";import"./InputLabel-60b08834.js";import"./formControlState-02eb4045.js";import"./Select-fa541a15.js";import"./Popover-78ca825b.js";import"./Modal-e69de70e.js";import"./Fade-11f6ebc6.js";import"./utils-7ef43b08.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-698471fc.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-a2e45162.js";import"./Grow-34c80021.js";import"./List-14aaf110.js";import"./ListContext-73043c56.js";import"./useControlled-aa938a2a.js";import"./InputBase-e88cc6c4.js";import"./clsx.m-1229b3e0.js";import"./createStack-f64ed9a6.js";import"./styled-f6e27ef3.js";function Ke(){const i=J(),t=te(),{currentUser:r,isValidating:se,isLoading:ie,login:U,logout:re,error:oe,updateCurrentUser:ae,getUserCookie:ne}=R(),[W,le]=u.useState(!1),[p,k]=u.useState(!1),[j,F]=u.useState({userEmail:"",password:""}),[C,O]=u.useState({userName:"",email:"",phoneNumber:""}),b=s=>x.success(s,{toastId:"success"}),G=s=>x.error(s,{toastId:"error"}),d=s=>x.warn(s,{toastId:"warn"}),v=s=>{const n=s.target.id,l=s.target.value.trim();F(f(g({},j),{[n]:l}))},z=s=>{s.preventDefault();const{userEmail:n,password:l}=j;n!==""&&l!==""?U(n,l).then(o=>{b("Logged in sucessfully"),t(L(o.full_name)),console.log("Login User Name = ",o.full_name),t(I(n)),console.log("inside then "+JSON.stringify(o)),setTimeout(()=>{i("/dashboard")},1500)}).catch(o=>{console.log("inside catch "+JSON.stringify(o.message)),G(o.message)}):d("Please fill all the details")},h=s=>{const n=s.target.id,l=s.target.value.trim();O(f(g({},C),{[n]:l}))},B=()=>{var s="^[0-9]+$";const{userName:n,email:l,phoneNumber:o}=C;if(n!==""&&l!==""&&o!=="")if(o.length!==10)d("Phone Number must contain 10 numbers");else if(!o.match(s))d("Please enter a valid phone number");else{let y={name:"Guest",email:"guest@mail.com"};t(L(y.name)),t(I(y.email)),b("Logging in as Guest"),setTimeout(()=>{i("/dashboard")},1500)}else d("Please fill all the details")};return e.jsx(Z,{title:"Login - Novel Office",description:"this is Login page",children:e.jsxs(a,{sx:{position:"relative","&:before":{content:'""',background:"radial-gradient(#d2f1df, #d3d7fa, #bad8f4)",backgroundSize:"400% 400%",animation:"gradient 15s ease infinite",position:"absolute",height:"100%",width:"100%",opacity:"0.3"}},children:[e.jsx(S,{container:!0,spacing:0,justifyContent:"center",sx:{height:"100vh"},children:e.jsx(S,{item:!0,xs:12,sm:12,lg:5,xl:4,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs($,{elevation:24,sx:{p:4,zIndex:1,width:"100%",maxWidth:{xs:"350px",md:"350px",lg:"450px"}},children:[e.jsx(a,{display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(H,{})}),e.jsxs(e.Fragment,{children:[e.jsx(K,{fontWeight:"700",variant:"h3",mb:1}),W?e.jsxs(a,{children:[e.jsxs(E,{children:[e.jsxs(a,{children:[e.jsx(m,{htmlFor:"userName",children:"Name"}),e.jsx(c,{id:"userName",variant:"outlined",fullWidth:!0,autoComplete:"userName",onChange:h})]}),e.jsxs(a,{children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(c,{id:"email",type:"email",variant:"outlined",fullWidth:!0,autoComplete:"email",onChange:h})]}),e.jsxs(a,{children:[e.jsx(m,{htmlFor:"phoneNumber",children:"Phone number"}),e.jsx(c,{id:"phoneNumber",type:"text",variant:"outlined",fullWidth:!0,autoComplete:"current-phoneNumber",onChange:h})]})]}),e.jsx(a,{mt:3,children:e.jsx(P,{color:"primary",variant:"contained",size:"large",fullWidth:!0,onClick:B,type:"submit",children:"Sign In As Guest"})})]}):e.jsxs("form",{children:[e.jsxs(E,{children:[e.jsxs(a,{children:[e.jsx(m,{htmlFor:"userEmail",children:"Email"}),e.jsx(c,{id:"userEmail",variant:"outlined",autoComplete:"userEmail",placeholder:"sample@email.com",fullWidth:!0,onChange:v})]}),e.jsxs(a,{children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(Q,{type:p?"text":"password",endAdornment:e.jsx(Y,{position:"end",children:e.jsx(ee,{"aria-label":"toggle password visibility",onClick:()=>{k(!p)},edge:"end",children:p?e.jsx(V,{size:"20"}):e.jsx(X,{size:"20"})})}),id:"password",onChange:v,placeholder:"*******",fullWidth:!0})]})]}),e.jsx(a,{mt:3,children:e.jsx(P,{color:"primary",variant:"contained",size:"large",fullWidth:!0,onClick:z,type:"submit",children:"Sign In"})})]})]})]})})}),e.jsx(M,{position:"top-center",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})})}export{Ke as default};
