var T=Object.defineProperty,B=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var N=(i,t,a)=>t in i?T(i,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[t]=a,g=(i,t)=>{for(var a in t||(t={}))J.call(t,a)&&N(i,a,t[a]);if(w)for(var a of w(t))R.call(t,a)&&N(i,a,t[a]);return i},f=(i,t)=>B(i,A(t));import{x as V,z as _,r as u,j as e,A as L,$ as S}from"./index-3566f683.js";import{P as Z}from"./PageContainer-8f64643d.js";import{C as m}from"./CustomFormLabel-b90ff0a5.js";import{C as c}from"./CustomTextField-2b2eb379.js";import{L as $}from"./Logo-22112309.js";import{k as q,Q as x}from"./ReactToastify-18eadf10.js";import{C as H,I as M}from"./CustomOutlinedInput-893e81db.js";import{o as Q,p as X}from"./index.esm-7b5037c9.js";import{B as n}from"./Box-dab747f7.js";import{G as I}from"./Grid-280b352d.js";import{C as K}from"./Card-59633af4.js";import{T as Y}from"./Typography-c66aaf03.js";import{S as W}from"./Stack-e942958e.js";import{b as E}from"./Button-b2b7b55d.js";import{I as ee}from"./IconButton-0c848765.js";import{u as te}from"./useDispatch-be3d4271.js";import"./TextField-76275597.js";import"./Select-dd78e7c6.js";import"./Modal-03ed648e.js";import"./useControlled-3e7e98f7.js";import"./Paper-785f41b1.js";import"./clsx.m-1229b3e0.js";import"./createStack-b3727922.js";import"./styled-dd8fd5cf.js";function Ue(){const i=V(),t=te(),{currentUser:a,isValidating:se,isLoading:ie,login:P,logout:ae,error:oe,updateCurrentUser:re,getUserCookie:ne}=_(),[O,le]=u.useState(!1),[h,k]=u.useState(!1),[j,F]=u.useState({userEmail:"",password:""}),[C,U]=u.useState({userName:"",email:"",phoneNumber:""}),b=s=>x.success(s,{toastId:"success"}),z=s=>x.error(s,{toastId:"error"}),d=s=>x.warn(s,{toastId:"warn"}),v=s=>{const o=s.target.id,l=s.target.value.trim();F(f(g({},j),{[o]:l}))},G=s=>{s.preventDefault();const{userEmail:o,password:l}=j;o!==""&&l!==""?P(o,l).then(r=>{b("Logged in sucessfully"),t(L(r.full_name)),console.log("Login User Name = ",r.full_name),t(S(o)),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({email:o})),console.log("inside then "+JSON.stringify(r)),setTimeout(()=>{i("/dashboard")},1500)}).catch(r=>{console.log("inside catch "+JSON.stringify(r.message)),z(r.message)}):d("Please fill all the details")},p=s=>{const o=s.target.id,l=s.target.value.trim();U(f(g({},C),{[o]:l}))},D=()=>{var s="^[0-9]+$";const{userName:o,email:l,phoneNumber:r}=C;if(o!==""&&l!==""&&r!=="")if(r.length!==10)d("Phone Number must contain 10 numbers");else if(!r.match(s))d("Please enter a valid phone number");else{let y={name:"Guest",email:"guest@mail.com"};t(L(y.name)),t(S(y.email)),b("Logging in as Guest"),setTimeout(()=>{i("/dashboard")},1500)}else d("Please fill all the details")};return e.jsx(Z,{title:"Login - Novel Office",description:"this is Login page",children:e.jsxs(n,{sx:{position:"relative","&:before":{content:'""',background:"radial-gradient(#d2f1df, #d3d7fa, #bad8f4)",backgroundSize:"400% 400%",animation:"gradient 15s ease infinite",position:"absolute",height:"100%",width:"100%",opacity:"0.3"}},children:[e.jsx(I,{container:!0,spacing:0,justifyContent:"center",sx:{height:"100vh"},children:e.jsx(I,{item:!0,xs:12,sm:12,lg:5,xl:4,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(K,{elevation:24,sx:{p:4,zIndex:1,width:"100%",maxWidth:{xs:"350px",md:"350px",lg:"450px"}},children:[e.jsx(n,{display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx($,{})}),e.jsxs(e.Fragment,{children:[e.jsx(Y,{fontWeight:"700",variant:"h3",mb:1}),O?e.jsxs(n,{children:[e.jsxs(W,{children:[e.jsxs(n,{children:[e.jsx(m,{htmlFor:"userName",children:"Name"}),e.jsx(c,{id:"userName",variant:"outlined",fullWidth:!0,autoComplete:"userName",onChange:p})]}),e.jsxs(n,{children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(c,{id:"email",type:"email",variant:"outlined",fullWidth:!0,autoComplete:"email",onChange:p})]}),e.jsxs(n,{children:[e.jsx(m,{htmlFor:"phoneNumber",children:"Phone number"}),e.jsx(c,{id:"phoneNumber",type:"text",variant:"outlined",fullWidth:!0,autoComplete:"current-phoneNumber",onChange:p})]})]}),e.jsx(n,{mt:3,children:e.jsx(E,{color:"primary",variant:"contained",size:"large",fullWidth:!0,onClick:D,type:"submit",children:"Sign In As Guest"})})]}):e.jsxs("form",{children:[e.jsxs(W,{children:[e.jsxs(n,{children:[e.jsx(m,{htmlFor:"userEmail",children:"Email"}),e.jsx(c,{id:"userEmail",variant:"outlined",autoComplete:"userEmail",placeholder:"example@gmail.com",fullWidth:!0,onChange:v})]}),e.jsxs(n,{children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(H,{type:h?"text":"password",endAdornment:e.jsx(M,{position:"end",children:e.jsx(ee,{"aria-label":"toggle password visibility",onClick:()=>{k(!h)},edge:"end",children:h?e.jsx(Q,{size:"20"}):e.jsx(X,{size:"20"})})}),id:"password",onChange:v,placeholder:"*******",fullWidth:!0})]})]}),e.jsx(n,{mt:3,children:e.jsx(E,{color:"primary",variant:"contained",size:"large",fullWidth:!0,onClick:G,type:"submit",children:"Sign In"})})]})]})]})})}),e.jsx(q,{position:"top-center",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})})}export{Ue as default};
