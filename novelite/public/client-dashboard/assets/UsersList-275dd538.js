import{r as o,d as J,A as w,j as e,P as g}from"./index-8b3b8eba.js";import{P as K}from"./PageContainer-d98636eb.js";import{B as Q}from"./Banner-ff248020.js";import{T as V,a as X,b as Y,c as j,d as p,e as Z,f as ee,g as te,h as D,i as R,j as E,k as A}from"./LastPage-294bbf53.js";import{D as se,d as ie}from"./Close-15902f4f.js";import{G as I,u as ne}from"./Grid-f4d7d3ed.js";import{B as v}from"./Box-399c9622.js";import{P as oe}from"./Paper-0f05f7b2.js";import{T as d}from"./Typography-1427830e.js";import{B as U}from"./Button-8cc464ae.js";import{D as ae,a as re}from"./DialogContent-1834dda8.js";import{S as le}from"./Stack-6654f631.js";import{I as x}from"./IconButton-101c88e4.js";import{F as ce,C as pe}from"./FormControlLabel-986810d3.js";import{D as me}from"./DialogActions-84780869.js";import"./BlankCard-52d35f9e.js";import"./Card-db1260bf.js";import"./index.esm-eaeab6e7.js";import"./Tabs-ff6c9e23.js";import"./ownerWindow-fbe9f185.js";import"./useSlotProps-70f7ca87.js";import"./KeyboardArrowRight-bc2722de.js";import"./CardMedia-82ad2b80.js";import"./Stack-d98ae959.js";import"./createStack-ee48abd7.js";import"./styled-533bb9dc.js";import"./Avatar-32c1e00b.js";import"./index-8886e64c.js";import"./useSlot-512c6a68.js";import"./Toolbar-44462387.js";import"./Select-3a5e17b2.js";import"./Modal-06095198.js";import"./useControlled-a5c8634c.js";import"./ListContext-b8157264.js";import"./useFormControl-b611f770.js";import"./MenuItem-bddb5336.js";import"./dividerClasses-27c89fbf.js";import"./listItemTextClasses-4c972a14.js";import"./createSvgIcon-49cf013b.js";import"./isMuiElement-107d3612.js";function Ze(){var _;const[l,c]=o.useState(0),[n,r]=o.useState(5),[s,m]=o.useState([]),[C,f]=o.useState(!0),[P,u]=o.useState(!1),a=J(t=>t.novelprofileReducer.userEmail),[M,q]=o.useState(""),[b,k]=o.useState([]),[O,de]=o.useState([{permittedComponent:"Dashboard"},{permittedComponent:"Tickets"},{permittedComponent:"Invoice"},{permittedComponent:"Bookings"},{permittedComponent:"Expansion/Downsize"}]);o.useEffect(()=>{w.post("/api/method/novelite.api.api.get_user_permissions_by_email",{user_email:a}).then(t=>{m(t.data.message),f(!1),console.log("Data = ",t.data.message)})},[]);const $=(t,i)=>{const h=t.target.checked;u(!0),k(h?S=>[...S,{permittedComponent:i}]:S=>S.filter(L=>L.permittedComponent!==i))},W=()=>{let t={user_email:M,permissions_array:b};console.log("selectedPermissions = ",b),w.post("/api/method/novelite.api.api.update_permissions",t).then(i=>{console.log(i)})},[G,T]=o.useState(!1),N=(t,i)=>{T(!0),q(i),u(!1),k(t)},B=()=>{T(!1)},y=l>0?Math.max(0,(1+l)*n-(s==null?void 0:s.length)):0,z=(t,i)=>{c(i)},H=t=>{r(parseInt(t.target.value,10)),c(0)};return e.jsxs(K,{title:"User - Novel Office",description:"this is User Profile page",children:[e.jsxs(I,{p:1,children:[e.jsx(I,{item:!0,sm:12,children:e.jsx(Q,{})}),e.jsx(v,{pt:1,children:!C&&e.jsx(oe,{variant:"outlined",children:e.jsx(V,{children:e.jsxs(X,{"aria-label":"custom sales invoice",sx:{whiteSpace:"nowrap"},children:[e.jsx(Y,{children:e.jsxs(j,{children:[e.jsx(p,{children:e.jsx(d,{variant:"h6",children:"Users"})}),e.jsx(p,{children:e.jsx(d,{variant:"h6",children:"Permissions"})}),e.jsx(p,{children:e.jsx(d,{variant:"h6",children:"Action"})})]})}),e.jsxs(Z,{children:[(_=n>0?s==null?void 0:s.slice(l*n,l*n+n):s)==null?void 0:_.map(t=>e.jsxs(j,{children:[e.jsx(p,{children:e.jsx(d,{variant:"h6",children:t.username})}),e.jsx(p,{children:t.permissions.map(i=>e.jsx(e.Fragment,{children:e.jsx(d,{color:"textSecondary",variant:"h6",fontWeight:"400",children:i.permittedComponent},i.permittedComponent)}))}),e.jsx(p,{children:e.jsx(U,{variant:"outlined",onClick:()=>{N(t.permissions,t.username)},children:"Edit"})})]},t.username)),y>0&&e.jsx(j,{style:{height:53*y},children:e.jsx(p,{colSpan:6})})]}),e.jsx(ee,{children:e.jsx(j,{children:e.jsx(te,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:6,count:s==null?void 0:s.length,rowsPerPage:n,page:l,SelectProps:{inputprops:{"aria-label":"rows per page"},native:!0},onPageChange:z,onRowsPerPageChange:H,ActionsComponent:F})})})]})})})})]}),e.jsxs(ae,{fullWidth:!0,maxWidth:"sm",open:G,onClose:B,children:[e.jsx(se,{children:e.jsxs(le,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(d,{variant:"h5",children:"Edit Permissions"}),e.jsx(x,{onClick:B,"aria-label":"close",children:e.jsx(ie,{})})]})}),e.jsx(re,{children:O.map(t=>{const i=b.some(h=>h.permittedComponent===t.permittedComponent);return e.jsx(ce,{control:e.jsx(pe,{checked:i}),label:t.permittedComponent,onChange:h=>$(h,t.permittedComponent)},t.permittedComponent)})}),e.jsx(me,{children:e.jsx(v,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",p:1,children:e.jsx(U,{variant:"outlined",onClick:W,disabled:!P,children:"Submit"})})})]})]})}function F(l){const c=ne(),{count:n,page:r,rowsPerPage:s,onPageChange:m}=l,C=a=>{m(a,0)},f=a=>{m(a,r-1)},P=a=>{m(a,r+1)},u=a=>{m(a,Math.max(0,Math.ceil(n/s)-1))};return e.jsxs(v,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(x,{onClick:C,disabled:r===0,"aria-label":"first page",children:c.direction==="rtl"?e.jsx(D,{}):e.jsx(R,{})}),e.jsx(x,{onClick:f,disabled:r===0,"aria-label":"previous page",children:c.direction==="rtl"?e.jsx(E,{}):e.jsx(A,{})}),e.jsx(x,{onClick:P,disabled:r>=Math.ceil(n/s)-1,"aria-label":"next page",children:c.direction==="rtl"?e.jsx(A,{}):e.jsx(E,{})}),e.jsx(x,{onClick:u,disabled:r>=Math.ceil(n/s)-1,"aria-label":"last page",children:c.direction==="rtl"?e.jsx(R,{}):e.jsx(D,{})})]})}F.propTypes={count:g.number.isRequired,onPageChange:g.func.isRequired,page:g.number.isRequired,rowsPerPage:g.number.isRequired};export{Ze as default};
