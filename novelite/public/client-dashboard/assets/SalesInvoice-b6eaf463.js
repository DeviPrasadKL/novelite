import{Z as B,j as e,P as f,r as x,d as A,V as D}from"./index-8b3b8eba.js";import{T as M,a as O,b as q,c as v,d as c,e as $,f as E,g as U,h as I,i as k,j as _,k as L}from"./LastPage-294bbf53.js";import{r as H}from"./createSvgIcon-49cf013b.js";import"./ParentCard-b42c9f26.js";import{S as V}from"./Stack-6654f631.js";import{B as m}from"./Box-399c9622.js";import{T as n,s as z}from"./Typography-1427830e.js";import{F as W,I as G}from"./InputLabel-37dcdfba.js";import{S as Z}from"./Select-3a5e17b2.js";import{M as J}from"./MenuItem-bddb5336.js";import{P as K}from"./Paper-0f05f7b2.js";import{C as Q}from"./Chip-8098c819.js";import{L as X}from"./Link-52777340.js";import{u as Y,G as j}from"./Grid-f4d7d3ed.js";import{I as P}from"./IconButton-101c88e4.js";import{P as F}from"./PageContainer-d98636eb.js";import{B as ee}from"./Breadcrumb-180b5288.js";import"./KeyboardArrowRight-bc2722de.js";import"./Toolbar-44462387.js";import"./useControlled-a5c8634c.js";import"./ListContext-b8157264.js";import"./useFormControl-b611f770.js";import"./ownerWindow-fbe9f185.js";import"./isMuiElement-107d3612.js";import"./Card-db1260bf.js";import"./CardHeader-43943928.js";import"./Divider-15ff209d.js";import"./dividerClasses-27c89fbf.js";import"./CardContent-8f57d85d.js";import"./createStack-ee48abd7.js";import"./styled-533bb9dc.js";import"./Modal-06095198.js";import"./useSlotProps-70f7ca87.js";import"./listItemTextClasses-4c972a14.js";import"./index.esm-eaeab6e7.js";var S={},re=B;Object.defineProperty(S,"__esModule",{value:!0});var R=S.default=void 0,te=re(H()),ie=e;R=S.default=(0,te.default)((0,ie.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5z"}),"FileDownloadOutlined");function N(t){const i=Y(),{count:d,page:s,rowsPerPage:h,onPageChange:l}=t,p=u=>{l(u,0)},a=u=>{l(u,s-1)},o=u=>{l(u,s+1)},g=u=>{l(u,Math.max(0,Math.ceil(d/h)-1))};return e.jsxs(m,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(P,{onClick:p,disabled:s===0,"aria-label":"first page",children:i.direction==="rtl"?e.jsx(I,{}):e.jsx(k,{})}),e.jsx(P,{onClick:a,disabled:s===0,"aria-label":"previous page",children:i.direction==="rtl"?e.jsx(_,{}):e.jsx(L,{})}),e.jsx(P,{onClick:o,disabled:s>=Math.ceil(d/h)-1,"aria-label":"next page",children:i.direction==="rtl"?e.jsx(L,{}):e.jsx(_,{})}),e.jsx(P,{onClick:g,disabled:s>=Math.ceil(d/h)-1,"aria-label":"last page",children:i.direction==="rtl"?e.jsx(k,{}):e.jsx(I,{})})]})}N.propTypes={count:f.number.isRequired,onPageChange:f.func.isRequired,page:f.number.isRequired,rowsPerPage:f.number.isRequired};function se({data:t,statusFilter:i,setStatusFilter:d}){var y;const[s,h]=x.useState(0),[l,p]=x.useState(5),[a,o]=x.useState(t);x.useEffect(()=>{o(i==="Pending"?t==null?void 0:t.filter(r=>r.status==="Overdue"||r.status==="Unpaid"||r.status==="Partly Paid"||r.status==="Unpaid and Discounted"||r.status==="Overdue and Discounted"||r.status==="Partly Paid and Discounted"):i==="Paid"?t==null?void 0:t.filter(r=>r.status==="Paid"||r.status==="Credit Note Issued"):i==="Credit Note"?t==null?void 0:t.filter(r=>r.status==="Return"):t)},[i]);const g=s>0?Math.max(0,(1+s)*l-(a==null?void 0:a.length)):0,u=(r,C)=>{h(C)},T=r=>{p(parseInt(r.target.value,10)),h(0)};let w=["ALL","Pending","Paid","Credit Note"];return e.jsxs(V,{children:[e.jsxs(m,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(m,{children:e.jsx(n,{children:"Invoice List"})}),e.jsx(m,{sx:{mb:2},children:e.jsxs(W,{sx:{m:1,minWidth:140},children:[e.jsx(G,{id:"demo-simple-select-autowidth-label",children:"Status"}),e.jsx(Z,{labelId:"demo-simple-select-autowidth-label",id:"demo-simple-select-autowidth",value:i,label:"Status",onChange:r=>d(r.target.value),children:w.map((r,C)=>e.jsx(J,{value:r,children:r},r+C))})]})})]}),e.jsx(K,{variant:"outlined",children:e.jsx(M,{children:e.jsxs(O,{"aria-label":"custom sales invoice",sx:{whiteSpace:"nowrap"},children:[e.jsx(q,{children:e.jsxs(v,{children:[e.jsx(c,{children:e.jsx(n,{variant:"h6",children:"Invoice No."})}),e.jsx(c,{children:e.jsx(n,{variant:"h6",children:"Invoice Amount"})}),e.jsx(c,{children:e.jsx(n,{variant:"h6",children:"Due Date"})}),e.jsx(c,{children:e.jsx(n,{variant:"h6",children:"Location"})}),e.jsx(c,{children:e.jsx(n,{variant:"h6",children:"Status"})}),e.jsx(c,{children:e.jsx(n,{variant:"h6",children:"Download"})})]})}),e.jsxs($,{children:[(y=l>0?a==null?void 0:a.slice(s*l,s*l+l):a)==null?void 0:y.map(r=>e.jsxs(v,{children:[e.jsx(c,{children:e.jsx(n,{variant:"h6",children:r.name})}),e.jsx(c,{children:e.jsxs(n,{color:"textSecondary",variant:"h6",fontWeight:"400",children:["â‚¹ ",r.rounded_total]})}),e.jsx(c,{children:e.jsx(n,{variant:"h6",children:r.due_date})}),e.jsx(c,{children:e.jsx(n,{color:"textSecondary",variant:"h6",fontWeight:"400",children:r.location===null?"----":r.location})}),e.jsx(c,{children:e.jsx(Q,{color:i==="Paid"?"success":i==="Credit Note"?"error":i==="Pending"?"primary":"secondary",sx:{borderRadius:"6px"},size:"small",label:i==="All"?r.status==="Credit Note Issued"?"Paid":r.status==="Return"?"Credit Note":r.status:i})}),e.jsx(c,{children:e.jsx(m,{color:"secondary",marginLeft:"1.5rem",component:X,target:"_blank",href:`http://${window.location.hostname}/api/method/frappe.utils.print_format.download_pdf?doctype=Sales Invoice&name=${r.name}&format=Business Center&no_letterhead=1&letterhead=No Letterhead &settings={}&_lang=en-US`,children:e.jsx(R,{})})})]},r.name)),g>0&&e.jsx(v,{style:{height:53*g},children:e.jsx(c,{colSpan:6})})]}),e.jsx(E,{children:e.jsx(v,{children:e.jsx(U,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:6,count:a==null?void 0:a.length,rowsPerPage:l,page:s,SelectProps:{inputprops:{"aria-label":"rows per page"},native:!0},onPageChange:u,onRowsPerPageChange:T,ActionsComponent:N})})})]})})})]})}const b=z(m)(()=>({padding:"30px",transition:"0.1s ease-in",cursor:"pointer",color:"inherit","&:hover":{transform:"scale(1.03)"}})),ne=({data:t,setStatusFilter:i})=>{const[d,s]=x.useState([]),[h,l]=x.useState([]),[p,a]=x.useState([]);return x.useEffect(()=>{s(t==null?void 0:t.filter(o=>o.status==="Overdue"||o.status==="Unpaid"||o.status==="Partly Paid"||o.status==="Unpaid and Discounted"||o.status==="Overdue and Discounted"||o.status==="Partly Paid and Discounted")),l(t==null?void 0:t.filter(o=>o.status==="Paid"||o.status==="Credit Note Issued")),a(t==null?void 0:t.filter(o=>o.status==="Return"))},[]),e.jsx(m,{mb:2,children:e.jsxs(j,{container:!0,spacing:3,textAlign:"center",children:[e.jsx(j,{item:!0,xs:6,sm:6,lg:3,children:e.jsxs(b,{onClick:t.length!==0?()=>i("ALL"):void 0,sx:{backgroundColor:"primary.light",color:"primary.main",cursor:t.length!==0?"pointer":"default"},children:[e.jsx(n,{variant:"h3",children:t.length}),e.jsx(n,{variant:"h6",children:"ALL"})]})}),e.jsx(j,{item:!0,xs:6,sm:6,lg:3,children:e.jsxs(b,{onClick:d.length!==0?()=>i("Pending"):void 0,sx:{backgroundColor:"warning.light",color:"warning.main",cursor:d.length!==0?"pointer":"default"},children:[e.jsx(n,{variant:"h3",children:d.length}),e.jsx(n,{variant:"h6",children:"Pending"})]})}),e.jsx(j,{item:!0,xs:6,sm:6,lg:3,children:e.jsxs(b,{onClick:h.length!==0?()=>i("Paid"):void 0,sx:{backgroundColor:"success.light",color:"success.main",cursor:h.length!==0?"pointer":"default"},children:[e.jsx(n,{variant:"h3",children:h.length}),e.jsx(n,{variant:"h6",children:"Paid"})]})}),e.jsx(j,{item:!0,xs:6,sm:6,lg:3,children:e.jsxs(b,{onClick:p.length!==0?()=>i("Credit Note"):void 0,sx:{backgroundColor:"error.light",color:"error.main",cursor:p.length!==0?"pointer":"default"},children:[e.jsx(n,{variant:"h3",children:p.length}),e.jsx(n,{variant:"h6",children:"Credit Note"})]})})]})})},oe=[{to:"/dashboard",title:"Home"},{title:"Sales Invoice"}],He=()=>{const t=A(a=>a.novelprofileReducer.companyName),[i,d]=x.useState("ALL"),{data:s,error:h,isValidating:l,mutate:p}=D("Sales Invoice",{fields:["name","status","due_date","rounded_total","location"],filters:[["customer","=",t]],limit_start:0,limit:1e5,orderBy:{field:"creation",order:"desc"}});return e.jsxs(F,{title:"Sales Invoice - Novel Office",description:"this is Sales Invoice page",children:[e.jsx(ee,{title:"Sales Invoice",items:oe}),s&&e.jsx(ne,{data:s,statusFilter:i,setStatusFilter:d}),s&&e.jsx(se,{data:s,statusFilter:i,setStatusFilter:d})]})};export{He as default};
