var Ee=Object.defineProperty;var he=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable;var me=(e,t,s)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,se=(e,t)=>{for(var s in t||(t={}))Ae.call(t,s)&&me(e,s,t[s]);if(he)for(var s of he(t))We.call(t,s)&&me(e,s,t[s]);return e};import{_ as m,r as y,u as te,a as H,j as a,b as F,c as Z,y as J,aC as X,aD as Q,ah as Fe,aE as He,a2 as Ve,aF as Ue,L as qe,aG as Ge,aq as Qe,aH as Ze,a7 as Je}from"./index-ce6548a1.js";import{B as Ke}from"./Breadcrumb-ac9efc36.js";import{P as Xe}from"./PageContainer-e73682e6.js";import{C as Ye}from"./ChildCard-e6f90ce9.js";import{B as j}from"./Box-caec6f75.js";import{c as Re,u as _e,G}from"./Grid-394a4d8f.js";import{g as ne,a as ie,s as E,c as K,b as ae,T as x,B as et,d as tt}from"./Typography-f35d3103.js";import{u as Se}from"./useDispatch-e8260f3f.js";import{r as re,i as le}from"./createSvgIcon-946baeb3.js";import{k as at,Q as fe}from"./ReactToastify-6bd04274.js";import{F as ve,I as be,S as ye}from"./Select-29702368.js";import{M as je}from"./MenuItem-33fe9615.js";import{b as Y}from"./Button-666f1e41.js";import{T as oe}from"./TextField-fd328344.js";import{F as Ce,L as Ne,b as st,c as ot,d as nt,e as Pe,a as W,f as it}from"./TableRow-c4fde925.js";import{C as rt}from"./Chip-06c21d86.js";import{b as lt,g as ct,B as Te,D as dt,a as ut,T as pt}from"./Tooltip-14a0f60f.js";import{u as gt}from"./useControlled-8c384def.js";import{T as xt,r as ht,g as $e,M as mt}from"./Modal-d8cf6c52.js";import"./index-f9ed67d0.js";import"./index.esm-ad3652a2.js";import"./Card-4e5c3e6c.js";import"./CardHeader-4af36371.js";import"./Divider-0b3dee2a.js";import"./CardContent-1444a7b6.js";import"./ListContext-7a1e32aa.js";import"./useFormControl-4f6f2ecb.js";import"./listItemTextClasses-0d4457de.js";function ft(e){return ne("MuiDialogActions",e)}ie("MuiDialogActions",["root","spacing"]);const vt=["className","disableSpacing"],bt=e=>{const{classes:t,disableSpacing:s}=e;return ae({root:["root",!s&&"spacing"]},ft,t)},yt=E("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,!s.disableSpacing&&t.spacing]}})(({ownerState:e})=>m({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),jt=y.forwardRef(function(t,s){const o=te({props:t,name:"MuiDialogActions"}),{className:c,disableSpacing:d=!1}=o,h=H(o,vt),l=m({},o,{disableSpacing:d}),i=bt(l);return a.jsx(yt,m({className:K(i.root,c),ownerState:l,ref:s},h))}),ke=jt,Ct=["className","id"],Nt=e=>{const{classes:t}=e;return ae({root:["root"]},ct,t)},Pt=E(x,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),Tt=y.forwardRef(function(t,s){const o=te({props:t,name:"MuiDialogTitle"}),{className:c,id:d}=o,h=H(o,Ct),l=o,i=Nt(l),{titleId:r=d}=y.useContext(lt);return a.jsx(Pt,m({component:"h2",className:K(i.root,c),ownerState:l,ref:s,variant:"h6",id:d!=null?d:r},h))}),$t=Tt;function kt(e){return ne("MuiPagination",e)}ie("MuiPagination",["root","ul","outlined","text"]);const It=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Ot(e={}){const{boundaryCount:t=1,componentName:s="usePagination",count:o=1,defaultPage:c=1,disabled:d=!1,hideNextButton:h=!1,hidePrevButton:l=!1,onChange:i,page:r,showFirstButton:I=!1,showLastButton:B=!1,siblingCount:$=1}=e,f=H(e,It),[g,D]=gt({controlled:r,default:c,name:s,state:"page"}),O=(p,P)=>{r||D(P),i&&i(p,P)},C=(p,P)=>{const V=P-p+1;return Array.from({length:V},(U,q)=>p+q)},b=C(1,Math.min(t,o)),T=C(Math.max(o-t+1,t+1),o),R=Math.max(Math.min(g-$,o-t-$*2-1),t+2),_=Math.min(Math.max(g+$,t+$*2+2),T.length>0?T[0]-2:o-1),N=[...I?["first"]:[],...l?[]:["previous"],...b,...R>t+2?["start-ellipsis"]:t+1<o-t?[t+1]:[],...C(R,_),..._<o-t-1?["end-ellipsis"]:o-t>t?[o-t]:[],...T,...h?[]:["next"],...B?["last"]:[]],z=p=>{switch(p){case"first":return 1;case"previous":return g-1;case"next":return g+1;case"last":return o;default:return null}},L=N.map(p=>typeof p=="number"?{onClick:P=>{O(P,p)},type:"page",page:p,selected:p===g,disabled:d,"aria-current":p===g?"true":void 0}:{onClick:P=>{O(P,z(p))},type:p,page:z(p),selected:!1,disabled:d||p.indexOf("ellipsis")===-1&&(p==="next"||p==="last"?g>=o:g<=1)});return m({items:L},f)}function Rt(e){return ne("MuiPaginationItem",e)}const _t=ie("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),S=_t,Ie=Re(a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Oe=Re(a.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),St=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Le=(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t[`size${Z(s.size)}`],s.variant==="text"&&t[`text${Z(s.color)}`],s.variant==="outlined"&&t[`outlined${Z(s.color)}`],s.shape==="rounded"&&t.rounded,s.type==="page"&&t.page,(s.type==="start-ellipsis"||s.type==="end-ellipsis")&&t.ellipsis,(s.type==="previous"||s.type==="next")&&t.previousNext,(s.type==="first"||s.type==="last")&&t.firstLast]},Lt=e=>{const{classes:t,color:s,disabled:o,selected:c,size:d,shape:h,type:l,variant:i}=e,r={root:["root",`size${Z(d)}`,i,h,s!=="standard"&&`${i}${Z(s)}`,o&&"disabled",c&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[l]],icon:["icon"]};return ae(r,Rt,t)},wt=E("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Le})(({theme:e,ownerState:t})=>m({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${S.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),Bt=E(et,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Le})(({theme:e,ownerState:t})=>m({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${S.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${S.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${S.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:F(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${S.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:F(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${S.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>m({},t.variant==="text"&&{[`&.${S.selected}`]:m({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${S.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${S.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${S.selected}`]:m({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:F(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:F(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:F(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${S.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:F(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${S.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),Dt=E("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>m({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),Mt=y.forwardRef(function(t,s){const o=te({props:t,name:"MuiPaginationItem"}),{className:c,color:d="standard",component:h,components:l={},disabled:i=!1,page:r,selected:I=!1,shape:B="circular",size:$="medium",slots:f={},type:g="page",variant:D="text"}=o,O=H(o,St),C=m({},o,{color:d,disabled:i,selected:I,shape:B,size:$,type:g,variant:D}),b=_e(),T=Lt(C),_=(b.direction==="rtl"?{previous:f.next||l.next||Oe,next:f.previous||l.previous||Ie,last:f.first||l.first||Ce,first:f.last||l.last||Ne}:{previous:f.previous||l.previous||Ie,next:f.next||l.next||Oe,first:f.first||l.first||Ce,last:f.last||l.last||Ne})[g];return g==="start-ellipsis"||g==="end-ellipsis"?a.jsx(wt,{ref:s,ownerState:C,className:K(T.root,c),children:"…"}):a.jsxs(Bt,m({ref:s,ownerState:C,component:h,disabled:i,className:K(T.root,c)},O,{children:[g==="page"&&r,_?a.jsx(Dt,{as:_,ownerState:C,className:T.icon}):null]}))}),zt=Mt,Et=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],At=e=>{const{classes:t,variant:s}=e;return ae({root:["root",s],ul:["ul"]},kt,t)},Wt=E("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant]]}})({}),Ft=E("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Ht(e,t,s){return e==="page"?`${s?"":"Go to "}page ${t}`:`Go to ${e} page`}const Vt=y.forwardRef(function(t,s){const o=te({props:t,name:"MuiPagination"}),{boundaryCount:c=1,className:d,color:h="standard",count:l=1,defaultPage:i=1,disabled:r=!1,getItemAriaLabel:I=Ht,hideNextButton:B=!1,hidePrevButton:$=!1,renderItem:f=L=>a.jsx(zt,m({},L)),shape:g="circular",showFirstButton:D=!1,showLastButton:O=!1,siblingCount:C=1,size:b="medium",variant:T="text"}=o,R=H(o,Et),{items:_}=Ot(m({},o,{componentName:"Pagination"})),N=m({},o,{boundaryCount:c,color:h,count:l,defaultPage:i,disabled:r,getItemAriaLabel:I,hideNextButton:B,hidePrevButton:$,renderItem:f,shape:g,showFirstButton:D,showLastButton:O,siblingCount:C,size:b,variant:T}),z=At(N);return a.jsx(Wt,m({"aria-label":"pagination navigation",className:K(z.root,d),ownerState:N,ref:s},R,{children:a.jsx(Ft,{className:z.ul,ownerState:N,children:_.map((L,p)=>a.jsx("li",{children:f(m({},L,{color:h,"aria-label":I(L.type,L.page,L.selected),shape:g,size:b,variant:T}))},p))})}))}),Ut=Vt,qt=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Gt={entering:{transform:"none"},entered:{transform:"none"}},Qt=y.forwardRef(function(t,s){const o=_e(),c={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:d,appear:h=!0,children:l,easing:i,in:r,onEnter:I,onEntered:B,onEntering:$,onExit:f,onExited:g,onExiting:D,style:O,timeout:C=c,TransitionComponent:b=xt}=t,T=H(t,qt),R=y.useRef(null),_=tt(R,l.ref,s),N=v=>w=>{if(v){const A=R.current;w===void 0?v(A):v(A,w)}},z=N($),L=N((v,w)=>{ht(v);const A=$e({style:O,timeout:C,easing:i},{mode:"enter"});v.style.webkitTransition=o.transitions.create("transform",A),v.style.transition=o.transitions.create("transform",A),I&&I(v,w)}),p=N(B),P=N(D),V=N(v=>{const w=$e({style:O,timeout:C,easing:i},{mode:"exit"});v.style.webkitTransition=o.transitions.create("transform",w),v.style.transition=o.transitions.create("transform",w),f&&f(v)}),U=N(g),q=v=>{d&&d(R.current,v)};return a.jsx(b,m({appear:h,in:r,nodeRef:R,onEnter:L,onEntered:p,onEntering:z,onExit:V,onExited:U,onExiting:P,addEndListener:q,timeout:C},T,{children:(v,w)=>y.cloneElement(l,m({style:m({transform:"scale(0)",visibility:v==="exited"&&!r?"hidden":void 0},Gt[v],O,l.props.style),ref:_},w))}))}),Zt=Qt,ee=E(j)(()=>({padding:"30px",transition:"0.1s ease-in",cursor:"pointer",color:"inherit","&:hover":{transform:"scale(1.03)"}})),Jt=({userEmail:e,filterLocation:t})=>{const s=Se(),o=J(i=>i.ticketReducer.tickets);o&&o.filter(i=>i.status==="On Hold").length,o&&o.filter(i=>i.status==="Open").length,o&&o.filter(i=>i.status==="Closed").length;const c=()=>{const{data:i}=Q("Issue",t==="ALL"?[["raised_by","=",e]]:[["raised_by","=",e],["location","=",t]],!1);return i||0},d=()=>{const{data:i}=Q("Issue",t==="ALL"?[["status","=","closed"],["raised_by","=",e]]:[["status","=","closed"],["raised_by","=",e],["location","=",t]],!1);return i||0},h=()=>{const{data:i}=Q("Issue",t==="ALL"?[["status","=","on hold"],["raised_by","=",e]]:[["status","=","on hold"],["raised_by","=",e],["location","=",t]],!1);return i||0},l=()=>{const{data:i}=Q("Issue",t==="ALL"?[["status","=","open"],["raised_by","=",e]]:[["status","=","open"],["raised_by","=",e],["location","=",t]],!1);return i||0};return a.jsxs(G,{container:!0,spacing:3,textAlign:"center",children:[a.jsx(G,{item:!0,xs:6,sm:6,lg:3,children:a.jsxs(ee,{onClick:l()!==0?()=>s(X("Open")):void 0,sx:{backgroundColor:"success.light",color:"success.main"},children:[a.jsx(x,{variant:"h3",children:l()}),a.jsx(x,{variant:"h6",children:"New"})]})}),a.jsx(G,{item:!0,xs:6,sm:6,lg:3,children:a.jsxs(ee,{onClick:h()!==0?()=>s(X("On Hold")):void 0,sx:{backgroundColor:"warning.light",color:"warning.main"},children:[a.jsx(x,{variant:"h3",children:h()}),a.jsx(x,{variant:"h6",children:"On Hold"})]})}),a.jsx(G,{item:!0,xs:6,sm:6,lg:3,children:a.jsxs(ee,{onClick:d()!==0?()=>s(X("Closed")):void 0,sx:{backgroundColor:"error.light",color:"error.main"},children:[a.jsx(x,{variant:"h3",children:d()}),a.jsx(x,{variant:"h6",children:"Closed"})]})}),a.jsx(G,{item:!0,xs:6,sm:6,lg:3,children:a.jsxs(ee,{onClick:c()!==0?()=>s(X("total_tickets")):void 0,sx:{backgroundColor:"primary.light",color:"primary.main"},children:[a.jsx(x,{variant:"h3",children:c()}),a.jsx(x,{variant:"h6",children:"Total"})]})})]})},Kt=Jt;var ce={},Xt=le;Object.defineProperty(ce,"__esModule",{value:!0});var we=ce.default=void 0,Yt=Xt(re()),ea=a,ta=(0,Yt.default)((0,ea.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"}),"ChatBubbleOutline");we=ce.default=ta;var de={},aa=le;Object.defineProperty(de,"__esModule",{value:!0});var Be=de.default=void 0,sa=aa(re()),oa=a,na=(0,sa.default)((0,oa.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");Be=de.default=na;var ue={},ia=le;Object.defineProperty(ue,"__esModule",{value:!0});var De=ue.default=void 0,ra=ia(re()),la=a,ca=(0,ra.default)((0,la.jsx)("path",{d:"m10.54 11-.54-.54L7.54 8 6 6.46 2.38 2.84 1.27 1.73 0 3l2.01 2.01L2 22l4-4h9l5.73 5.73L22 22.46 17.54 18l-7-7zM8 14H6v-2h2v2zm-2-3V9l2 2H6zm14-9H4.08L10 7.92V6h8v2h-7.92l1 1H18v2h-4.92l6.99 6.99C21.14 17.95 22 17.08 22 16V4c0-1.1-.9-2-2-2z"}),"SpeakerNotesOff");De=ue.default=ca;const da={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"none",boxShadow:24,p:4},ua=({userEmail:e,totalPages:t,confirmedLocations:s,setFilterLocation:o,filterLocation:c})=>{const d=Se(),[h,l]=y.useState(!1),[i,r]=y.useState(!1);y.useState(!1);const[I,B]=y.useState(0),[$,f]=y.useState(""),[g,D]=y.useState(""),[O,C]=y.useState(""),[b,T]=y.useState({subject:"",description:"",location:c,creation_via:"Ticket"}),R=(n,u)=>{u=u-1,B(u*10)},_=n=>{let u=n.target.value;o(u),d(Ge(u)),b.location=u,T(se({},b)),console.log("Location = ",u),n.target.value!=="Property Location"&&localStorage.setItem("location",u)},{data:N,error:z,isValidating:L,mutate:p}=Fe("Issue",{fields:["subject","creation","status","raised_by","name","description","location"],filters:c==="ALL"?[["raised_by","=",e]]:[["raised_by","=",e],["location","=",c]],limit_start:I,limit:10,orderBy:{field:"creation",order:"desc"}});var P=[];N&&(d(He(N)),P=N);const V=()=>{l(!0)},U=()=>{l(!1)},q=(n,u,M)=>{r(!0),f(n),D(u),C(M)},v=()=>r(!1),w=(n,u,M)=>{if(n!=null)switch(u){case"total_tickets":return n.filter(k=>k.subject.toLocaleLowerCase().includes(M));case"On Hold":return n.filter(k=>k.status==="On Hold"&&k.subject.toLocaleLowerCase().includes(M));case"Closed":return n.filter(k=>k.status==="Closed"&&k.subject.toLocaleLowerCase().includes(M));case"Open":return n.filter(k=>k.status==="Open"&&k.subject.toLocaleLowerCase().includes(M));default:throw new Error(`Unknown filter: ${u}`)}};P!=null&&(P=J(n=>w(n.ticketReducer.tickets,n.ticketReducer.currentFilter,n.ticketReducer.ticketSearch)));const{createDoc:A,isCompleted:xa}=Ve(),Me=n=>fe.success(n,{toastId:"success"}),pe=n=>fe.warn(n,{toastId:"warn"}),ge=n=>{var k,xe;const u=(k=document.querySelector("#standard-basic"))==null?void 0:k.value.trim(),M=(xe=document.querySelector("#outlined-multiline-static"))==null?void 0:xe.value.trim();u!==""&&M!==""&&(b.subject=u,b.description=M,T(se({},b)))},ze=()=>{b.subject===""||b.description===""?pe("Please fill the details"):b.location==="ALL"||b.location===""?pe("Please Select the Location"):A("Issue",b).then(()=>{Me("Ticket created Successfully"),l(!1),p()}).catch(n=>{console.log("inside catch "+JSON.stringify(n.message)),notifyError(n.message)})};return a.jsxs(j,{mt:4,children:[a.jsx(j,{display:"flex",justifyContent:{xs:"center",md:"end",ls:"end"},alignItems:"center",children:a.jsx(j,{sx:{mb:2},children:(s==null?void 0:s.length)>=2?a.jsxs(ve,{sx:{m:1,minWidth:170},children:[a.jsx(be,{id:"demo-simple-select-autowidth-label",children:"Property Location"}),a.jsx(ye,{labelId:"demo-simple-select-autowidth-label",id:"demo-simple-select-autowidth",value:c,label:"Property Location",onChange:_,children:s==null?void 0:s.map((n,u)=>a.jsx(je,{value:n.shortName,children:n.fullName},n.shortName+u))})]}):a.jsx(x,{variant:"h4",children:"This customer is not linked to any Location"})})}),a.jsxs(j,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[a.jsx(j,{children:a.jsxs(Y,{variant:"contained",onClick:V,children:["New  ",a.jsx(Be,{})]})}),a.jsx(j,{sx:{ml:"auto",width:{xs:"8rem",md:"12rem",ls:"12rem"}},display:"flex",justifyContent:"space-between",alignItems:"center",children:a.jsx(oe,{size:"small",label:"Search",onChange:n=>d(Ue(n.target.value))})})]}),a.jsx(st,{children:a.jsxs(ot,{children:[a.jsx(nt,{children:a.jsxs(Pe,{children:[a.jsx(W,{children:a.jsx(x,{variant:"h6",children:"Ticket"})}),a.jsx(W,{children:a.jsx(x,{variant:"h6",children:"Status"})}),a.jsx(W,{children:a.jsx(x,{variant:"h6",children:"Chat"})})]})}),a.jsx(it,{children:P&&P.map(n=>a.jsxs(Pe,{hover:!0,children:[a.jsx(W,{onClick:()=>{q(n.subject,n.description,n.status)},style:{cursor:"pointer"},children:a.jsxs(j,{children:[a.jsx(x,{variant:"h6",fontWeight:"500",wrap:!0,children:n.subject}),a.jsx(x,{color:"textSecondary",noWrap:!0,sx:{maxWidth:"250px"},variant:"subtitle2",fontWeight:"400",children:n.ticketDescription})]})}),a.jsx(W,{children:a.jsx(rt,{sx:{backgroundColor:n.status==="Open"?u=>u.palette.success.light:n.status==="Closed"?u=>u.palette.error.light:n.status==="On Hold"?u=>u.palette.warning.light:n.status==="Pending"},size:"small",label:n.status==="Open"?"New":`${n.status}`})}),n.status==="Closed"?a.jsx(W,{children:a.jsx(Te,{color:"secondary",badgeContent:0,children:a.jsx(De,{})})}):a.jsx(W,{component:qe,to:`/tickets_chat/${n.name}/${n.subject}`,children:a.jsx(Te,{color:"secondary",badgeContent:0,children:a.jsx(we,{})})})]},n.subject))})]})}),a.jsx(j,{my:3,display:"flex",justifyContent:"center",children:a.jsx(Ut,{count:t,color:"primary",onChange:R})}),a.jsx(mt,{open:i,onClose:v,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:a.jsxs(j,{sx:da,children:[a.jsxs(j,{children:[a.jsx(x,{id:"modal-modal-title",variant:"h6",component:"h2",style:{textDecoration:"underline"},children:"Ticket Name:"}),a.jsx(x,{id:"modal-modal-title",children:$})]}),a.jsxs(j,{children:[a.jsx(x,{id:"modal-modal-title",variant:"h6",component:"h2",style:{textDecoration:"underline",marginTop:"0.5rem"},children:"Ticket Description:"}),a.jsx(x,{id:"modal-modal-description",children:g||"No Description"})]}),a.jsxs(j,{children:[a.jsx(x,{id:"modal-modal-title",variant:"h6",component:"h2",style:{textDecoration:"underline",marginTop:"0.5rem"},children:"Ticket Status:"}),a.jsx(x,{id:"modal-modal-description",children:O})]}),a.jsx(ke,{children:a.jsx(Y,{onClick:v,children:"Close"})})]})}),a.jsxs(dt,{fullWidth:!0,maxWidth:"sm",open:h,onClose:U,children:[a.jsx($t,{children:"Raise a Ticket"}),a.jsxs(ut,{children:[a.jsxs(j,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"90%"},children:[a.jsx(j,{children:a.jsx(oe,{id:"standard-basic",label:"Ticket Title",variant:"standard",style:{width:"100%"},onChange:n=>{ge()}})}),a.jsx(j,{sx:{mt:3},children:a.jsx(oe,{id:"outlined-multiline-static",label:"Ticket Description",multiline:!0,rows:4,style:{width:"100%"},onChange:n=>{ge()}})}),a.jsx(pt,{disableFocusListener:!0,disableTouchListener:!0,placement:"right-end",TransitionComponent:Zt,title:"Property for which you want to rise ticket",children:(s==null?void 0:s.length)>=2?a.jsx(j,{children:a.jsxs(ve,{fullWidth:!0,sx:{mt:3},children:[a.jsx(be,{id:"demo-simple-select-label",children:"Property Location"}),a.jsx(ye,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:c,label:"Property Location",onChange:_,children:s==null?void 0:s.map(n=>a.jsx(je,{value:n.shortName,children:n.fullName},n.shortName))})]})}):a.jsx(x,{variant:"h4",sx:{mt:3},children:"This customer is not linked to any Location"})}),a.jsx(Y,{variant:"contained",sx:{mt:3},onClick:ze,disabled:(s==null?void 0:s.length)===1,children:"Submit"})]}),a.jsx(at,{position:"top-center",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]}),a.jsx(ke,{children:a.jsx(Y,{onClick:U,children:"Close"})})]})]})},pa=ua,ga=[{to:"/dashboard",title:"Home"},{title:"Tickets"}];function Va(){const e=J(r=>r.novelprofileReducer.userEmail),t=J(r=>r.novelprofileReducer.location),s=J(r=>r.novelprofileReducer.companyName),[o,c]=y.useState(t);y.useEffect(()=>{let r=localStorage.getItem("location");r!=="Property Location"&&c(r)},[t,c]),o===null&&c("ALL"),Qe("comment_added",r=>{console.log("Event = "+r)}),Ze("Comment",r=>{console.log("Event D = ",r)});const{data:d}=Q("Issue",o==="ALL"?["raised_by","=",e]:[["raised_by","=",e],["location","=",o]],!1),h=Math.ceil(d/10)||1;var i=(()=>{const{data:r,error:I,isValidating:B,mutate:$}=Je("Customer",`${s}`);return r==null?void 0:r.leads.map(f=>f.confirmed_location)})();return i=i==null?void 0:i.map(r=>{switch(r){case"NTP":return{shortName:r,fullName:"NTP-Kudlu Gate"};case"NOM":return{shortName:r,fullName:"NOM-Marathahalli"};case"NOC":return{shortName:r,fullName:"NOC-MG Road"};case"NOQ":return{shortName:r,fullName:"NOQ-Brigade Road"};case"NOW":return{shortName:r,fullName:"NOW-Whitefield"};case"NBP":return{shortName:r,fullName:"NBP-Adugodi"};case"NOB":return{shortName:r,fullName:"NBP-ITPL"};default:return{shortName:r,fullName:r}}}),i==null||i.unshift({shortName:"ALL",fullName:"ALL"}),a.jsxs(Xe,{title:"Tickets - Novel Office",description:"this is Note page",children:[a.jsx(Ke,{title:"Tickets app",items:ga}),a.jsxs(Ye,{children:[a.jsx(Kt,{userEmail:e,filterLocation:o}),a.jsx(pa,{userEmail:e,totalPages:h,confirmedLocations:i,filterLocation:o,setFilterLocation:c})]})]})}export{Va as default};
