var Ee=Object.defineProperty;var he=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable;var me=(e,t,s)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,se=(e,t)=>{for(var s in t||(t={}))Ae.call(t,s)&&me(e,s,t[s]);if(he)for(var s of he(t))We.call(t,s)&&me(e,s,t[s]);return e};import{_ as h,r as y,u as te,a as H,j as a,b as F,c as J,y as V,az as X,aA as Z,ah as Fe,aB as Ve,a2 as He,aC as Ue,L as qe,aD as Ge,aE as Qe,a7 as Ze}from"./index-7beedb8e.js";import{B as Je}from"./Breadcrumb-f0f04833.js";import{P as Ke}from"./PageContainer-beff9693.js";import{C as Xe}from"./ChildCard-4ac1dd10.js";import{B as j}from"./Box-d98c1a64.js";import{c as Re,u as _e,G as Q}from"./Grid-e0639067.js";import{g as ne,a as ie,s as E,c as K,b as ae,T as g,B as Ye,d as et}from"./Typography-212872cb.js";import{u as Se}from"./useDispatch-a9326f5b.js";import{r as re,i as le}from"./createSvgIcon-1cd7e241.js";import{k as tt,Q as fe}from"./ReactToastify-303f0f3e.js";import{F as ve,I as be,S as ye}from"./Select-f2445807.js";import{M as je}from"./MenuItem-958df465.js";import{b as Y}from"./Button-d219dec2.js";import{T as oe}from"./TextField-4a956cc5.js";import{F as Ce,L as Ne,b as at,c as st,d as ot,e as Pe,a as W,f as nt}from"./TableRow-b3dc842c.js";import{C as it}from"./Chip-6faae9d2.js";import{b as rt,g as lt,B as Te,D as ct,a as dt,T as ut}from"./Tooltip-4cc5afff.js";import{u as pt}from"./useControlled-92ccd080.js";import{T as gt,r as xt,g as $e,M as ht}from"./Modal-9dacc2fa.js";import"./index.esm-d9ef1124.js";import"./Card-e685ffd3.js";import"./CardHeader-461005f7.js";import"./Divider-db5e0b6a.js";import"./CardContent-ee48826d.js";import"./ListContext-9e5014b9.js";import"./useFormControl-77288aaf.js";import"./listItemTextClasses-a15652ad.js";function mt(e){return ne("MuiDialogActions",e)}ie("MuiDialogActions",["root","spacing"]);const ft=["className","disableSpacing"],vt=e=>{const{classes:t,disableSpacing:s}=e;return ae({root:["root",!s&&"spacing"]},mt,t)},bt=E("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,!s.disableSpacing&&t.spacing]}})(({ownerState:e})=>h({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),yt=y.forwardRef(function(t,s){const n=te({props:t,name:"MuiDialogActions"}),{className:c,disableSpacing:d=!1}=n,x=H(n,ft),l=h({},n,{disableSpacing:d}),i=vt(l);return a.jsx(bt,h({className:K(i.root,c),ownerState:l,ref:s},x))}),ke=yt,jt=["className","id"],Ct=e=>{const{classes:t}=e;return ae({root:["root"]},lt,t)},Nt=E(g,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),Pt=y.forwardRef(function(t,s){const n=te({props:t,name:"MuiDialogTitle"}),{className:c,id:d}=n,x=H(n,jt),l=n,i=Ct(l),{titleId:r=d}=y.useContext(rt);return a.jsx(Nt,h({component:"h2",className:K(i.root,c),ownerState:l,ref:s,variant:"h6",id:d!=null?d:r},x))}),Tt=Pt;function $t(e){return ne("MuiPagination",e)}ie("MuiPagination",["root","ul","outlined","text"]);const kt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function It(e={}){const{boundaryCount:t=1,componentName:s="usePagination",count:n=1,defaultPage:c=1,disabled:d=!1,hideNextButton:x=!1,hidePrevButton:l=!1,onChange:i,page:r,showFirstButton:I=!1,showLastButton:L=!1,siblingCount:$=1}=e,m=H(e,kt),[p,D]=pt({controlled:r,default:c,name:s,state:"page"}),O=(u,P)=>{r||D(P),i&&i(u,P)},C=(u,P)=>{const U=P-u+1;return Array.from({length:U},(q,G)=>u+G)},v=C(1,Math.min(t,n)),T=C(Math.max(n-t+1,t+1),n),R=Math.max(Math.min(p-$,n-t-$*2-1),t+2),_=Math.min(Math.max(p+$,t+$*2+2),T.length>0?T[0]-2:n-1),N=[...I?["first"]:[],...l?[]:["previous"],...v,...R>t+2?["start-ellipsis"]:t+1<n-t?[t+1]:[],...C(R,_),..._<n-t-1?["end-ellipsis"]:n-t>t?[n-t]:[],...T,...x?[]:["next"],...L?["last"]:[]],z=u=>{switch(u){case"first":return 1;case"previous":return p-1;case"next":return p+1;case"last":return n;default:return null}},w=N.map(u=>typeof u=="number"?{onClick:P=>{O(P,u)},type:"page",page:u,selected:u===p,disabled:d,"aria-current":u===p?"true":void 0}:{onClick:P=>{O(P,z(u))},type:u,page:z(u),selected:!1,disabled:d||u.indexOf("ellipsis")===-1&&(u==="next"||u==="last"?p>=n:p<=1)});return h({items:w},m)}function Ot(e){return ne("MuiPaginationItem",e)}const Rt=ie("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),S=Rt,Ie=Re(a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Oe=Re(a.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),_t=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],we=(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t[`size${J(s.size)}`],s.variant==="text"&&t[`text${J(s.color)}`],s.variant==="outlined"&&t[`outlined${J(s.color)}`],s.shape==="rounded"&&t.rounded,s.type==="page"&&t.page,(s.type==="start-ellipsis"||s.type==="end-ellipsis")&&t.ellipsis,(s.type==="previous"||s.type==="next")&&t.previousNext,(s.type==="first"||s.type==="last")&&t.firstLast]},St=e=>{const{classes:t,color:s,disabled:n,selected:c,size:d,shape:x,type:l,variant:i}=e,r={root:["root",`size${J(d)}`,i,x,s!=="standard"&&`${i}${J(s)}`,n&&"disabled",c&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[l]],icon:["icon"]};return ae(r,Ot,t)},wt=E("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:we})(({theme:e,ownerState:t})=>h({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${S.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),Bt=E(Ye,{name:"MuiPaginationItem",slot:"Root",overridesResolver:we})(({theme:e,ownerState:t})=>h({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${S.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${S.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${S.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:F(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${S.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:F(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${S.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>h({},t.variant==="text"&&{[`&.${S.selected}`]:h({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${S.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${S.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${S.selected}`]:h({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:F(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:F(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:F(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${S.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:F(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${S.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),Lt=E("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>h({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),Dt=y.forwardRef(function(t,s){const n=te({props:t,name:"MuiPaginationItem"}),{className:c,color:d="standard",component:x,components:l={},disabled:i=!1,page:r,selected:I=!1,shape:L="circular",size:$="medium",slots:m={},type:p="page",variant:D="text"}=n,O=H(n,_t),C=h({},n,{color:d,disabled:i,selected:I,shape:L,size:$,type:p,variant:D}),v=_e(),T=St(C),_=(v.direction==="rtl"?{previous:m.next||l.next||Oe,next:m.previous||l.previous||Ie,last:m.first||l.first||Ce,first:m.last||l.last||Ne}:{previous:m.previous||l.previous||Ie,next:m.next||l.next||Oe,first:m.first||l.first||Ce,last:m.last||l.last||Ne})[p];return p==="start-ellipsis"||p==="end-ellipsis"?a.jsx(wt,{ref:s,ownerState:C,className:K(T.root,c),children:"…"}):a.jsxs(Bt,h({ref:s,ownerState:C,component:x,disabled:i,className:K(T.root,c)},O,{children:[p==="page"&&r,_?a.jsx(Lt,{as:_,ownerState:C,className:T.icon}):null]}))}),Mt=Dt,zt=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Et=e=>{const{classes:t,variant:s}=e;return ae({root:["root",s],ul:["ul"]},$t,t)},At=E("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant]]}})({}),Wt=E("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Ft(e,t,s){return e==="page"?`${s?"":"Go to "}page ${t}`:`Go to ${e} page`}const Vt=y.forwardRef(function(t,s){const n=te({props:t,name:"MuiPagination"}),{boundaryCount:c=1,className:d,color:x="standard",count:l=1,defaultPage:i=1,disabled:r=!1,getItemAriaLabel:I=Ft,hideNextButton:L=!1,hidePrevButton:$=!1,renderItem:m=w=>a.jsx(Mt,h({},w)),shape:p="circular",showFirstButton:D=!1,showLastButton:O=!1,siblingCount:C=1,size:v="medium",variant:T="text"}=n,R=H(n,zt),{items:_}=It(h({},n,{componentName:"Pagination"})),N=h({},n,{boundaryCount:c,color:x,count:l,defaultPage:i,disabled:r,getItemAriaLabel:I,hideNextButton:L,hidePrevButton:$,renderItem:m,shape:p,showFirstButton:D,showLastButton:O,siblingCount:C,size:v,variant:T}),z=Et(N);return a.jsx(At,h({"aria-label":"pagination navigation",className:K(z.root,d),ownerState:N,ref:s},R,{children:a.jsx(Wt,{className:z.ul,ownerState:N,children:_.map((w,u)=>a.jsx("li",{children:m(h({},w,{color:x,"aria-label":I(w.type,w.page,w.selected),shape:p,size:v,variant:T}))},u))})}))}),Ht=Vt,Ut=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],qt={entering:{transform:"none"},entered:{transform:"none"}},Gt=y.forwardRef(function(t,s){const n=_e(),c={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:d,appear:x=!0,children:l,easing:i,in:r,onEnter:I,onEntered:L,onEntering:$,onExit:m,onExited:p,onExiting:D,style:O,timeout:C=c,TransitionComponent:v=gt}=t,T=H(t,Ut),R=y.useRef(null),_=et(R,l.ref,s),N=f=>B=>{if(f){const A=R.current;B===void 0?f(A):f(A,B)}},z=N($),w=N((f,B)=>{xt(f);const A=$e({style:O,timeout:C,easing:i},{mode:"enter"});f.style.webkitTransition=n.transitions.create("transform",A),f.style.transition=n.transitions.create("transform",A),I&&I(f,B)}),u=N(L),P=N(D),U=N(f=>{const B=$e({style:O,timeout:C,easing:i},{mode:"exit"});f.style.webkitTransition=n.transitions.create("transform",B),f.style.transition=n.transitions.create("transform",B),m&&m(f)}),q=N(p),G=f=>{d&&d(R.current,f)};return a.jsx(v,h({appear:x,in:r,nodeRef:R,onEnter:w,onEntered:u,onEntering:z,onExit:U,onExited:q,onExiting:P,addEndListener:G,timeout:C},T,{children:(f,B)=>y.cloneElement(l,h({style:h({transform:"scale(0)",visibility:f==="exited"&&!r?"hidden":void 0},qt[f],O,l.props.style),ref:_},B))}))}),Qt=Gt,ee=E(j)(()=>({padding:"30px",transition:"0.1s ease-in",cursor:"pointer",color:"inherit","&:hover":{transform:"scale(1.03)"}})),Zt=({userEmail:e,filterLocation:t})=>{const s=Se(),n=V(i=>i.ticketReducer.tickets);n&&n.filter(i=>i.status==="On Hold").length,n&&n.filter(i=>i.status==="Open").length,n&&n.filter(i=>i.status==="Closed").length;const c=()=>{const{data:i}=Z("Issue",t==="ALL"?[["raised_by","=",e]]:[["raised_by","=",e],["location","=",t]],!1);return i||0},d=()=>{const{data:i}=Z("Issue",t==="ALL"?[["status","=","closed"],["raised_by","=",e]]:[["status","=","closed"],["raised_by","=",e],["location","=",t]],!1);return i||0},x=()=>{const{data:i}=Z("Issue",t==="ALL"?[["status","=","on hold"],["raised_by","=",e]]:[["status","=","on hold"],["raised_by","=",e],["location","=",t]],!1);return i||0},l=()=>{const{data:i}=Z("Issue",t==="ALL"?[["status","=","open"],["raised_by","=",e]]:[["status","=","open"],["raised_by","=",e],["location","=",t]],!1);return i||0};return a.jsxs(Q,{container:!0,spacing:3,textAlign:"center",children:[a.jsx(Q,{item:!0,xs:6,sm:6,lg:3,children:a.jsxs(ee,{onClick:l()!==0?()=>s(X("Open")):void 0,sx:{backgroundColor:"success.light",color:"success.main"},children:[a.jsx(g,{variant:"h3",children:l()}),a.jsx(g,{variant:"h6",children:"New"})]})}),a.jsx(Q,{item:!0,xs:6,sm:6,lg:3,children:a.jsxs(ee,{onClick:x()!==0?()=>s(X("On Hold")):void 0,sx:{backgroundColor:"warning.light",color:"warning.main"},children:[a.jsx(g,{variant:"h3",children:x()}),a.jsx(g,{variant:"h6",children:"On Hold"})]})}),a.jsx(Q,{item:!0,xs:6,sm:6,lg:3,children:a.jsxs(ee,{onClick:d()!==0?()=>s(X("Closed")):void 0,sx:{backgroundColor:"error.light",color:"error.main"},children:[a.jsx(g,{variant:"h3",children:d()}),a.jsx(g,{variant:"h6",children:"Closed"})]})}),a.jsx(Q,{item:!0,xs:6,sm:6,lg:3,children:a.jsxs(ee,{onClick:c()!==0?()=>s(X("total_tickets")):void 0,sx:{backgroundColor:"primary.light",color:"primary.main"},children:[a.jsx(g,{variant:"h3",children:c()}),a.jsx(g,{variant:"h6",children:"Total"})]})})]})},Jt=Zt;var ce={},Kt=le;Object.defineProperty(ce,"__esModule",{value:!0});var Be=ce.default=void 0,Xt=Kt(re()),Yt=a,ea=(0,Xt.default)((0,Yt.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"}),"ChatBubbleOutline");Be=ce.default=ea;var de={},ta=le;Object.defineProperty(de,"__esModule",{value:!0});var Le=de.default=void 0,aa=ta(re()),sa=a,oa=(0,aa.default)((0,sa.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");Le=de.default=oa;var ue={},na=le;Object.defineProperty(ue,"__esModule",{value:!0});var De=ue.default=void 0,ia=na(re()),ra=a,la=(0,ia.default)((0,ra.jsx)("path",{d:"m10.54 11-.54-.54L7.54 8 6 6.46 2.38 2.84 1.27 1.73 0 3l2.01 2.01L2 22l4-4h9l5.73 5.73L22 22.46 17.54 18l-7-7zM8 14H6v-2h2v2zm-2-3V9l2 2H6zm14-9H4.08L10 7.92V6h8v2h-7.92l1 1H18v2h-4.92l6.99 6.99C21.14 17.95 22 17.08 22 16V4c0-1.1-.9-2-2-2z"}),"SpeakerNotesOff");De=ue.default=la;const ca={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"none",boxShadow:24,p:4},da=({userEmail:e,totalPages:t,confirmedLocations:s,setFilterLocation:n,filterLocation:c})=>{const d=Se(),[x,l]=y.useState(!1),[i,r]=y.useState(!1);y.useState(!1);const[I,L]=y.useState(0),[$,m]=y.useState(""),[p,D]=y.useState(""),[O,C]=y.useState(""),[v,T]=y.useState({subject:"",description:"",location:c,creation_via:"Ticket"}),R=(o,b)=>{b=b-1,L(b*10)},_=o=>{n(o.target.value),d(Ge(o.target.value)),v.location=o.target.value,T(se({},v)),console.log("Location = ",o.target.value),o.target.value!=="Property Location"&&localStorage.setItem("location",o.target.value)},{data:N,error:z,isValidating:w,mutate:u}=Fe("Issue",{fields:["subject","creation","status","raised_by","name","description","location"],filters:c==="ALL"?[["raised_by","=",e]]:[["raised_by","=",e],["location","=",c]],limit_start:I,limit:10,orderBy:{field:"creation",order:"desc"}});var P=[];N&&(d(Ve(N)),P=N);const U=()=>{l(!0)},q=()=>{l(!1)},G=(o,b,M)=>{r(!0),m(o),D(b),C(M)},f=()=>r(!1),B=(o,b,M)=>{if(o!=null)switch(b){case"total_tickets":return o.filter(k=>k.subject.toLocaleLowerCase().includes(M));case"On Hold":return o.filter(k=>k.status==="On Hold"&&k.subject.toLocaleLowerCase().includes(M));case"Closed":return o.filter(k=>k.status==="Closed"&&k.subject.toLocaleLowerCase().includes(M));case"Open":return o.filter(k=>k.status==="Open"&&k.subject.toLocaleLowerCase().includes(M));default:throw new Error(`Unknown filter: ${b}`)}};P!=null&&(P=V(o=>B(o.ticketReducer.tickets,o.ticketReducer.currentFilter,o.ticketReducer.ticketSearch)));const{createDoc:A,isCompleted:ga}=He(),Me=o=>fe.success(o,{toastId:"success"}),pe=o=>fe.warn(o,{toastId:"warn"}),ge=o=>{var k,xe;const b=(k=document.querySelector("#standard-basic"))==null?void 0:k.value.trim(),M=(xe=document.querySelector("#outlined-multiline-static"))==null?void 0:xe.value.trim();b!==""&&M!==""&&(v.subject=b,v.description=M,T(se({},v)))},ze=()=>{v.subject===""||v.description===""?pe("Please fill the details"):v.location==="ALL"||v.location===""?pe("Please Select the Location"):A("Issue",v).then(()=>{Me("Ticket created Successfully"),l(!1),u()}).catch(o=>{console.log("inside catch "+JSON.stringify(o.message)),notifyError(o.message)})};return a.jsxs(j,{mt:4,children:[a.jsx(j,{display:"flex",justifyContent:{xs:"center",md:"end",ls:"end"},alignItems:"center",children:a.jsx(j,{sx:{mb:2},children:(s==null?void 0:s.length)>=2?a.jsxs(ve,{sx:{m:1,minWidth:170},children:[a.jsx(be,{id:"demo-simple-select-autowidth-label",children:"Property Location"}),a.jsx(ye,{labelId:"demo-simple-select-autowidth-label",id:"demo-simple-select-autowidth",value:c,label:"Property Location",onChange:_,children:s==null?void 0:s.map((o,b)=>a.jsx(je,{value:o.shortName,children:o.fullName},o.shortName+b))})]}):a.jsx(g,{variant:"h4",children:"This customer is not linked to any Location"})})}),a.jsxs(j,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[a.jsx(j,{children:a.jsxs(Y,{variant:"contained",onClick:U,children:["New  ",a.jsx(Le,{})]})}),a.jsx(j,{sx:{ml:"auto",width:{xs:"8rem",md:"12rem",ls:"12rem"}},display:"flex",justifyContent:"space-between",alignItems:"center",children:a.jsx(oe,{size:"small",label:"Search",onChange:o=>d(Ue(o.target.value))})})]}),a.jsx(at,{children:a.jsxs(st,{children:[a.jsx(ot,{children:a.jsxs(Pe,{children:[a.jsx(W,{children:a.jsx(g,{variant:"h6",children:"Ticket"})}),a.jsx(W,{children:a.jsx(g,{variant:"h6",children:"Status"})}),a.jsx(W,{children:a.jsx(g,{variant:"h6",children:"Chat"})})]})}),a.jsx(nt,{children:P&&P.map(o=>a.jsxs(Pe,{hover:!0,children:[a.jsx(W,{onClick:()=>{G(o.subject,o.description,o.status)},style:{cursor:"pointer"},children:a.jsxs(j,{children:[a.jsx(g,{variant:"h6",fontWeight:"500",wrap:!0,children:o.subject}),a.jsx(g,{color:"textSecondary",noWrap:!0,sx:{maxWidth:"250px"},variant:"subtitle2",fontWeight:"400",children:o.ticketDescription})]})}),a.jsx(W,{children:a.jsx(it,{sx:{backgroundColor:o.status==="Open"?b=>b.palette.success.light:o.status==="Closed"?b=>b.palette.error.light:o.status==="On Hold"?b=>b.palette.warning.light:o.status==="Pending"},size:"small",label:o.status==="Open"?"New":`${o.status}`})}),o.status==="Closed"?a.jsx(W,{children:a.jsx(Te,{color:"secondary",badgeContent:0,children:a.jsx(De,{})})}):a.jsx(W,{component:qe,to:`/tickets_chat/${o.name}/${o.subject}`,children:a.jsx(Te,{color:"secondary",badgeContent:0,children:a.jsx(Be,{})})})]},o.subject))})]})}),a.jsx(j,{my:3,display:"flex",justifyContent:"center",children:a.jsx(Ht,{count:t,color:"primary",onChange:R})}),a.jsx(ht,{open:i,onClose:f,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:a.jsxs(j,{sx:ca,children:[a.jsxs(j,{children:[a.jsx(g,{id:"modal-modal-title",variant:"h6",component:"h2",style:{textDecoration:"underline"},children:"Ticket Name:"}),a.jsx(g,{id:"modal-modal-title",children:$})]}),a.jsxs(j,{children:[a.jsx(g,{id:"modal-modal-title",variant:"h6",component:"h2",style:{textDecoration:"underline",marginTop:"0.5rem"},children:"Ticket Description:"}),a.jsx(g,{id:"modal-modal-description",children:p||"No Description"})]}),a.jsxs(j,{children:[a.jsx(g,{id:"modal-modal-title",variant:"h6",component:"h2",style:{textDecoration:"underline",marginTop:"0.5rem"},children:"Ticket Status:"}),a.jsx(g,{id:"modal-modal-description",children:O})]}),a.jsx(ke,{children:a.jsx(Y,{onClick:f,children:"Close"})})]})}),a.jsxs(ct,{fullWidth:!0,maxWidth:"sm",open:x,onClose:q,children:[a.jsx(Tt,{children:"Raise a Ticket"}),a.jsxs(dt,{children:[a.jsxs(j,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"90%"},children:[a.jsx(j,{children:a.jsx(oe,{id:"standard-basic",label:"Ticket Title",variant:"standard",style:{width:"100%"},onChange:o=>{ge()}})}),a.jsx(j,{sx:{mt:3},children:a.jsx(oe,{id:"outlined-multiline-static",label:"Ticket Description",multiline:!0,rows:4,style:{width:"100%"},onChange:o=>{ge()}})}),a.jsx(ut,{disableFocusListener:!0,disableTouchListener:!0,placement:"right-end",TransitionComponent:Qt,title:"Property for which you want to rise ticket",children:(s==null?void 0:s.length)>=2?a.jsx(j,{children:a.jsxs(ve,{fullWidth:!0,sx:{mt:3},children:[a.jsx(be,{id:"demo-simple-select-label",children:"Property Location"}),a.jsx(ye,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:c,label:"Property Location",onChange:_,children:s==null?void 0:s.map(o=>a.jsx(je,{value:o.shortName,children:o.fullName},o.shortName))})]})}):a.jsx(g,{variant:"h4",sx:{mt:3},children:"This customer is not linked to any Location"})}),a.jsx(Y,{variant:"contained",sx:{mt:3},onClick:ze,disabled:(s==null?void 0:s.length)===1,children:"Submit"})]}),a.jsx(tt,{position:"top-center",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]}),a.jsx(ke,{children:a.jsx(Y,{onClick:q,children:"Close"})})]})]})},ua=da,pa=[{to:"/dashboard",title:"Home"},{title:"Tickets"}];function Fa(){const e=V(r=>r.novelprofileReducer.userEmail);V(r=>r.novelprofileReducer.fullName);const t=V(r=>r.novelprofileReducer.companyName),s=V(r=>r.novelprofileReducer.location),[n,c]=y.useState(s);y.useEffect(()=>{let r=localStorage.getItem("location");r!=="Property Location"&&c(r)},[s]),n===null&&c("ALL"),Qe("Room Bookings",r=>{console.log("Event = "+r)});const{data:d}=Z("Issue",n==="ALL"?["raised_by","=",e]:[["raised_by","=",e],["location","=",n]],!1),x=Math.ceil(d/10)||1;var i=(()=>{const{data:r,error:I,isValidating:L,mutate:$}=Ze("Customer",`${t}`);return r==null?void 0:r.leads.map(m=>m.confirmed_location)})();return i=i==null?void 0:i.map(r=>{switch(r){case"NTP":return{shortName:r,fullName:"NTP-Kudlu Gate"};case"NOM":return{shortName:r,fullName:"NOM-Marathahalli"};case"NOC":return{shortName:r,fullName:"NOC-MG Road"};case"NOQ":return{shortName:r,fullName:"NOQ-Brigade Road"};case"NOW":return{shortName:r,fullName:"NOW-Whitefield"};case"NBP":return{shortName:r,fullName:"NBP-Adugodi"};case"NOB":return{shortName:r,fullName:"NBP-ITPL"};default:return{shortName:r,fullName:r}}}),i==null||i.unshift({shortName:"ALL",fullName:"ALL"}),a.jsxs(Ke,{title:"Tickets - Novel Office",description:"this is Note page",children:[a.jsx(Je,{title:"Tickets app",items:pa}),a.jsxs(Xe,{children:[a.jsx(Jt,{userEmail:e,filterLocation:n}),a.jsx(ua,{userEmail:e,totalPages:x,confirmedLocations:i,filterLocation:n,setFilterLocation:c})]})]})}export{Fa as default};
