import{e as g,r as M,Q as E,R as h,j as e,i as P,S as O,T as W,l as F,V as k}from"./index-4c0b60c1.js";import{B as G}from"./Breadcrumb-993a2ffd.js";import{P as H}from"./PageContainer-1e378f9f.js";import{S as I}from"./Scrollbar-8da7d080.js";import{D as N,g as Q,G as w,u as U,w as $,x as q,y as J,A as V,R as X,F as Y}from"./index.esm-ab86738a.js";import{B as t}from"./Box-62c7ea08.js";import{B as v}from"./Badge-4cd6d0fa.js";import{A as f}from"./Avatar-94748a06.js";import{T as d}from"./Typography-d41e00bf.js";import{T as _}from"./TextField-2386fcf6.js";import{I as K}from"./InputAdornment-dda3dbbd.js";import{L as Z}from"./List-14aaf110.js";import{B as ee}from"./Button-7b1b6ba5.js";import{M as re}from"./Select-fa541a15.js";import{M as C}from"./MenuItem-9cba98ac.js";import{L as te}from"./ListItemButton-94e34d87.js";import{L as S}from"./ListItemAvatar-3cbcfe9c.js";import{L as A}from"./ListItemText-219493e3.js";import{f as D}from"./index-2884b8b0.js";import{A as se}from"./Alert-0f868411.js";import{u as L}from"./useDispatch-cfa82895.js";import{u as B}from"./useMediaQuery-6eb16eb1.js";import{D as ie}from"./Drawer-8a0eba12.js";import{L as ae}from"./ListItem-177a5a81.js";import{S as oe}from"./Stack-5b6d67fa.js";import{I as m}from"./IconButton-deace95f.js";import{D as R}from"./Divider-1c3d9281.js";import{P as ne}from"./Popover-78ca825b.js";import{I as le}from"./InputBase-e88cc6c4.js";import{A as ce}from"./AppCard-a5568c73.js";import"./Grid-858c8d28.js";import"./Link-600c6b92.js";import"./index-e812a307.js";import"./usePreviousProps-a9d4c058.js";import"./FormControl-05733a9f.js";import"./utils-5ebfb48b.js";import"./useFormControl-4a8d5a10.js";import"./isMuiElement-06cc0e9d.js";import"./useId-ab6b636f.js";import"./InputLabel-60b08834.js";import"./formControlState-02eb4045.js";import"./ListContext-73043c56.js";import"./Modal-e69de70e.js";import"./Fade-11f6ebc6.js";import"./utils-7ef43b08.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-698471fc.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-a2e45162.js";import"./useControlled-aa938a2a.js";import"./listItemIconClasses-9b443d96.js";import"./dividerClasses-4698ac49.js";import"./listItemTextClasses-35935c78.js";import"./listItemButtonClasses-dd7f83b8.js";import"./index-5a0c5ef2.js";import"./index-3c900e66.js";import"./Close-94e2406c.js";import"./Slide-059637cc.js";import"./createStack-f64ed9a6.js";import"./styled-f6e27ef3.js";import"./Grow-34c80021.js";import"./Card-93702703.js";const de=()=>{const a=L(),n=g(r=>r.chatReducer.chatContent);M.useEffect(()=>{a(E())},[a]);const l=(r,c)=>r&&r.filter(o=>o.name.toLocaleLowerCase().includes(c.toLocaleLowerCase())),i=g(r=>l(r.chatReducer.chats,r.chatReducer.chatSearch)),s=r=>{let c="";const o=r.messages[r.messages.length-1];if(o){const T=o.senderId===r.id?"You: ":"",z=o.type==="image"?"Sent a photo":o.msg;c=`${T}${z}`}return c},u=r=>{var c;return(c=F.last(r.messages))==null?void 0:c.createdAt},[b,j]=h.useState(null),x=!!b,y=r=>{j(r.currentTarget)},p=()=>{j(null)};return e.jsxs("div",{children:[e.jsxs(t,{display:"flex",alignItems:"center",gap:"10px",p:3,children:[e.jsx(v,{variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",color:"success",children:e.jsx(f,{alt:"Remy Sharp",src:P,sx:{width:54,height:54}})}),e.jsxs(t,{children:[e.jsx(d,{variant:"body1",fontWeight:600,children:"John Deo"}),e.jsx(d,{variant:"body2",children:"Marketing Manager"})]})]}),e.jsx(t,{px:3,py:1,children:e.jsx(_,{id:"outlined-search",placeholder:"Search contacts",size:"small",type:"search",variant:"outlined",InputProps:{endAdornment:e.jsx(K,{position:"end",children:e.jsx(N,{size:"16"})})},fullWidth:!0,onChange:r=>a(O(r.target.value))})}),e.jsxs(Z,{sx:{px:0},children:[e.jsxs(t,{px:2.5,pb:1,children:[e.jsxs(ee,{id:"basic-button","aria-controls":x?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":x?"true":void 0,onClick:y,color:"inherit",children:["Recent Chats ",e.jsx(Q,{size:"16"})]}),e.jsxs(re,{id:"basic-menu",anchorEl:b,open:x,onClose:p,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(C,{onClick:p,children:"Sort By Time"}),e.jsx(C,{onClick:p,children:"Sort By Unread"}),e.jsx(C,{onClick:p,children:"Mark as all Read"})]})]}),e.jsx(I,{sx:{height:{lg:"calc(100vh - 100px)",md:"100vh"},maxHeight:"600px"},children:i&&i.length?i.map(r=>e.jsxs(te,{onClick:()=>a(W(r.id)),sx:{mb:.5,py:2,px:3,alignItems:"start"},selected:n===r.id,children:[e.jsx(S,{children:e.jsx(v,{color:r.status==="online"?"success":r.status==="busy"?"error":r.status==="away"?"warning":"secondary",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",children:e.jsx(f,{alt:"Remy Sharp",src:r.thumb,sx:{width:42,height:42}})})}),e.jsx(A,{primary:e.jsx(d,{variant:"subtitle2",fontWeight:600,mb:.5,children:r.name}),secondary:s(r),secondaryTypographyProps:{noWrap:!0},sx:{my:0}}),e.jsx(t,{sx:{flexShrink:"0"},mt:.5,children:e.jsx(d,{variant:"body2",children:D(new Date(u(r)),{addSuffix:!1})})})]},r.id)):e.jsx(t,{m:2,children:e.jsx(se,{severity:"error",variant:"filled",sx:{color:"white"},children:"No Contacts Found!"})})})]})]})},me=320,pe=({isMobileSidebarOpen:a,onSidebarClose:n})=>{const l=B(i=>i.breakpoints.up("lg"));return e.jsx(ie,{open:a,onClose:n,variant:l?"permanent":"temporary",sx:{width:me,flexShrink:0,zIndex:l?0:1,"& .MuiDrawer-paper":{position:"relative"}},children:e.jsx(de,{})})},xe=({toggleChatSidebar:a})=>{const[n,l]=h.useState(!0);B(s=>s.breakpoints.up("lg"));const i=g(s=>s.chatReducer.chats[s.chatReducer.chatContent-1]);return e.jsx(t,{children:i?e.jsxs(t,{children:[e.jsxs(t,{children:[e.jsxs(t,{display:"flex",alignItems:"center",p:2,children:[e.jsx(t,{sx:{display:{xs:"block",md:"block",lg:"none"},mr:"10px"},children:e.jsx(w,{stroke:1.5,onClick:a})}),e.jsxs(ae,{dense:!0,disableGutters:!0,children:[e.jsx(S,{children:e.jsx(v,{color:i.status==="online"?"success":i.status==="busy"?"error":i.status==="away"?"warning":"secondary",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",children:e.jsx(f,{alt:i.name,src:i.thumb})})}),e.jsx(A,{primary:e.jsx(d,{variant:"h5",children:i.name}),secondary:i.status})]},i.id),e.jsxs(oe,{direction:"row",children:[e.jsx(m,{"aria-label":"delete",children:e.jsx(U,{stroke:1.5})}),e.jsx(m,{"aria-label":"delete",children:e.jsx($,{stroke:1.5})}),e.jsx(m,{"aria-label":"delete",onClick:()=>l(!n),children:e.jsx(q,{stroke:1.5})})]})]}),e.jsx(R,{})]}),e.jsx(t,{display:"flex",children:e.jsx(t,{width:"100%",children:e.jsx(I,{sx:{height:"650px",overflow:"auto",maxHeight:"800px"},children:e.jsx(t,{p:3,children:i.messages.map(s=>e.jsx(t,{children:i.id===s.senderId?e.jsx(e.Fragment,{children:e.jsxs(t,{display:"flex",children:[e.jsx(S,{children:e.jsx(f,{alt:i.name,src:i.thumb,sx:{width:40,height:40}})}),e.jsxs(t,{children:[s.createdAt?e.jsxs(d,{variant:"body2",color:"grey.400",mb:1,children:[i.name,","," ",D(new Date(s.createdAt),{addSuffix:!1})," ","ago"]}):null,s.type==="text"?e.jsx(t,{mb:2,sx:{p:1,backgroundColor:"grey.100",mr:"auto",maxWidth:"320px"},children:s.msg}):null,s.type==="image"?e.jsx(t,{mb:1,sx:{overflow:"hidden",lineHeight:"0px"},children:e.jsx("img",{src:s.msg,alt:"attach",width:"150"})}):null]})]})}):e.jsx(t,{mb:1,display:"flex",alignItems:"flex-end",flexDirection:"row-reverse",children:e.jsxs(t,{alignItems:"flex-end",display:"flex",flexDirection:"column",children:[s.createdAt?e.jsx(d,{variant:"body2",color:"grey.400",mb:1,children:"ago"}):null,s.type==="text"?e.jsx(t,{mb:1,sx:{p:1,backgroundColor:"primary.light",ml:"auto",maxWidth:"320px"},children:s.msg},s.id):null,s.type==="image"?e.jsx(t,{mb:1,sx:{overflow:"hidden",lineHeight:"0px"},children:e.jsx("img",{src:s.msg,alt:"attach",width:"250"})}):null]})})},s.id+s.msg+s.createdAt))})})})})]}):e.jsxs(t,{display:"flex",alignItems:"center",p:2,pb:1,pt:1,children:[e.jsx(t,{sx:{display:{xs:"flex",md:"flex",lg:"none"},mr:"10px"},children:e.jsx(w,{stroke:1.5,onClick:a})}),e.jsx(d,{variant:"h4",children:"Select Chat"})]})})},he=()=>{const[a,n]=h.useState(""),l=L(),[i,s]=h.useState(null),[u,b]=h.useState(),j=o=>{s(o.currentTarget)},x=()=>{s(null)},y=g(o=>o.chatReducer.chatContent),p=o=>{n(o.target.value)},r={id:y,msg:a},c=o=>{o.preventDefault(),o.stopPropagation(),l(k(r)),n("")};return e.jsx(t,{p:2,children:e.jsxs("form",{onSubmit:c,style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx(m,{"aria-label":"more",id:"long-button","aria-controls":"long-menu","aria-expanded":"true","aria-haspopup":"true",onClick:j,children:e.jsx(J,{})}),e.jsx(ne,{id:"long-menu",anchorEl:i,keepMounted:!0,open:!!i,onClose:x,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"bottom"},children:e.jsxs(t,{p:2,children:["Selected: ",u?u.emoji:""]})}),e.jsx(le,{id:"msg-sent",fullWidth:!0,value:a,placeholder:"Type a Message",size:"small",type:"text",inputProps:{"aria-label":"Type a Message"},onChange:p.bind(null)}),e.jsx(m,{"aria-label":"delete",onClick:()=>{l(k(r)),n("")},disabled:!a,color:"primary",children:e.jsx(V,{stroke:1.5,size:"20"})}),e.jsx(m,{"aria-label":"delete",children:e.jsx(X,{stroke:1.5,size:"20"})}),e.jsx(m,{"aria-label":"delete",children:e.jsx(Y,{stroke:1.5,size:"20"})})]})})},Sr=()=>{const[a,n]=M.useState(!1);return e.jsxs(H,{title:"Chat ui",description:"this is Chat page",children:[e.jsx(G,{title:"Chat app",subtitle:"Messenger"}),e.jsxs(ce,{children:[e.jsx(pe,{isMobileSidebarOpen:a,onSidebarClose:()=>n(!1)}),e.jsxs(t,{flexGrow:1,children:[e.jsx(xe,{toggleChatSidebar:()=>n(!0)}),e.jsx(R,{}),e.jsx(he,{})]})]})]})};export{Sr as default};
