var fe=Object.defineProperty;var ne=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var se=(e,t,r)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))be.call(t,r)&&se(e,r,t[r]);if(ne)for(var r of ne(t))he.call(t,r)&&se(e,r,t[r]);return e};import{r as g,y as H,_ as y,j as o,Z as le,d as k,af as je,ac as ye,ab as ve,ag as Ce,A as Se,R as we,L as Ae}from"./index-8b3b8eba.js";import{P as Re}from"./PageContainer-d98636eb.js";import{B as ke}from"./Breadcrumb-180b5288.js";import{C as ae}from"./ChildCard-dd994321.js";import{B as $}from"./Box-7c985c27.js";import{d as Q,g as Z,s as v,b as E,a as J,B as $e,T as a}from"./Typography-1427830e.js";import{S as b}from"./Stack-6654f631.js";import{r as pe}from"./createSvgIcon-49cf013b.js";import{B as G}from"./Button-8cc464ae.js";import{M as Pe}from"./Modal-06095198.js";import{F as Te,C as Ie}from"./FormControlLabel-986810d3.js";import{c as K}from"./index-8886e64c.js";import{u as Me}from"./useSlot-512c6a68.js";import{P as Be}from"./Paper-0f05f7b2.js";import{u as De}from"./useControlled-a5c8634c.js";import{C as _e}from"./Collapse-b2bade3d.js";import{u as Ne}from"./useDispatch-878c29d8.js";import"./index.esm-eaeab6e7.js";import"./Grid-f4d7d3ed.js";import"./useSlotProps-70f7ca87.js";import"./Link-52777340.js";import"./Box-399c9622.js";import"./Card-db1260bf.js";import"./CardHeader-43943928.js";import"./Divider-15ff209d.js";import"./dividerClasses-27c89fbf.js";import"./CardContent-8f57d85d.js";import"./createStack-ee48abd7.js";import"./styled-533bb9dc.js";import"./ownerWindow-fbe9f185.js";import"./isMuiElement-107d3612.js";import"./useFormControl-b611f770.js";import"./Stack-d98ae959.js";const Le=g.createContext({}),ue=Le;function We(e){return Z("MuiAccordion",e)}const qe=Q("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),U=qe,Ge=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],Ue=K(),Ee=e=>{const{classes:t,square:r,expanded:s,disabled:d,disableGutters:c}=e;return J({root:["root",!r&&"rounded",s&&"expanded",d&&"disabled",!c&&"gutters"],region:["region"]},We,t)},Oe=v(Be,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${U.region}`]:t.region},t.root,!r.square&&t.rounded,!r.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${U.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${U.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${U.expanded}`]:{margin:"16px 0"}}}]})),Ve=g.forwardRef(function(t,r){const s=Ue({props:t,name:"MuiAccordion"}),{children:d,className:c,defaultExpanded:u=!1,disabled:i=!1,disableGutters:l=!1,expanded:w,onChange:h,square:C=!1,slots:S={},slotProps:A={},TransitionComponent:B,TransitionProps:j}=s,f=H(s,Ge),[x,D]=De({controlled:w,default:u,name:"Accordion",state:"expanded"}),_=g.useCallback(I=>{D(!x),h&&h(I,!x)},[x,h,D]),[R,...O]=g.Children.toArray(d),N=g.useMemo(()=>({expanded:x,disabled:i,disableGutters:l,toggle:_}),[x,i,l,_]),T=y({},s,{square:C,disabled:i,disableGutters:l,expanded:x}),L=Ee(T),V=y({transition:B},S),z=y({transition:j},A),[n,W]=Me("transition",{elementType:_e,externalForwardedProps:{slots:V,slotProps:z},ownerState:T});return o.jsxs(Oe,y({className:E(L.root,c),ref:r,ownerState:T,square:C},f,{children:[o.jsx(ue.Provider,{value:N,children:R}),o.jsx(n,y({in:x,timeout:"auto"},W,{children:o.jsx("div",{"aria-labelledby":R.props.id,id:R.props["aria-controls"],role:"region",className:L.region,children:O})}))]}))}),ze=Ve;function Fe(e){return Z("MuiAccordionDetails",e)}Q("MuiAccordionDetails",["root"]);const He=["className"],Qe=K(),Ze=e=>{const{classes:t}=e;return J({root:["root"]},Fe,t)},Je=v("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),Ke=g.forwardRef(function(t,r){const s=Qe({props:t,name:"MuiAccordionDetails"}),{className:d}=s,c=H(s,He),u=s,i=Ze(u);return o.jsx(Je,y({className:E(i.root,d),ref:r,ownerState:u},c))}),Xe=Ke;function Ye(e){return Z("MuiAccordionSummary",e)}const eo=Q("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),P=eo,oo=["children","className","expandIcon","focusVisibleClassName","onClick"],to=K(),ro=e=>{const{classes:t,expanded:r,disabled:s,disableGutters:d}=e;return J({root:["root",r&&"expanded",s&&"disabled",!d&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!d&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]},Ye,t)},no=v($e,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${P.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${P.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${P.disabled})`]:{cursor:"pointer"},variants:[{props:r=>!r.disableGutters,style:{[`&.${P.expanded}`]:{minHeight:64}}}]}}),so=v("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${P.expanded}`]:{margin:"20px 0"}}}]})),ao=v("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${P.expanded}`]:{transform:"rotate(180deg)"}})),io=g.forwardRef(function(t,r){const s=to({props:t,name:"MuiAccordionSummary"}),{children:d,className:c,expandIcon:u,focusVisibleClassName:i,onClick:l}=s,w=H(s,oo),{disabled:h=!1,disableGutters:C,expanded:S,toggle:A}=g.useContext(ue),B=x=>{A&&A(x),l&&l(x)},j=y({},s,{expanded:S,disabled:h,disableGutters:C}),f=ro(j);return o.jsxs(no,y({focusRipple:!1,disableRipple:!0,disabled:h,component:"div","aria-expanded":S,className:E(f.root,c),focusVisibleClassName:E(f.focusVisible,i),onClick:B,ref:r,ownerState:j},w,{children:[o.jsx(so,{className:f.content,ownerState:j,children:d}),u&&o.jsx(ao,{className:f.expandIconWrapper,ownerState:j,children:u})]}))}),co=io;function lo({price:e,selectedSlots:t,tittle:r}){e=e/2;const s=e*(t==null?void 0:t.length),d=s*(18/100),c=t.map(i=>i.split(","));function u(i){if(Number.isInteger(i)){let l=i.toString();return l.length>3?l.slice(0,-3)+","+l.slice(-3):l}else return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(i)}return o.jsxs($,{p:2,children:[o.jsx(a,{variant:"h5",fontWeight:600,mb:3,children:r}),o.jsxs(b,{direction:"row",justifyContent:"space-between",mb:3,children:[o.jsx(a,{variant:"h6",fontWeight:400,children:"Number of slots"}),o.jsx(a,{variant:"h6",children:t==null?void 0:t.length})]}),o.jsxs(b,{direction:"row",justifyContent:"space-between",mb:3,children:[o.jsx(a,{variant:"h6",fontWeight:400,children:"Total hours"}),o.jsxs(a,{variant:"h6",children:[(t==null?void 0:t.length)/2," hr"]})]}),o.jsxs(b,{direction:"row",justifyContent:"space-between",mb:3,children:[o.jsx(a,{variant:"h6",fontWeight:400,children:"Slots timings"}),o.jsx(b,{justifyContent:"space-between",children:c==null?void 0:c.map((i,l)=>o.jsx(a,{variant:"h6",color:"primary",mb:.5,children:i},i+l))})]}),o.jsx("hr",{}),o.jsxs(b,{direction:"row",justifyContent:"space-between",mb:1,mt:2,children:[o.jsx(a,{variant:"h6",children:"Total"}),o.jsxs(a,{variant:"h5",color:"success",children:["₹ ",u(s)]})]}),o.jsxs(b,{direction:"row",justifyContent:"space-between",mb:1,children:[o.jsx(a,{variant:"h6",children:"GST (18%)"}),o.jsxs(a,{variant:"h5",color:"success",children:["₹ ",u(d)]})]}),o.jsxs(b,{direction:"row",justifyContent:"space-between",mb:1,children:[o.jsx(a,{variant:"h6",children:"Grand Total "}),o.jsxs(a,{variant:"h5",color:"success",children:["₹ ",u(s+d)]})]})]})}var X={},po=le;Object.defineProperty(X,"__esModule",{value:!0});var me=X.default=void 0,uo=po(pe()),mo=o;me=X.default=(0,uo.default)((0,mo.jsx)("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22zm1 14h-2v2h2zm0-6h-2v4h2z"}),"WarningAmberOutlined");var Y={},go=le;Object.defineProperty(Y,"__esModule",{value:!0});var ge=Y.default=void 0,xo=go(pe()),fo=o;ge=Y.default=(0,xo.default)((0,fo.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIosSharp");const bo={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"none",boxShadow:24,p:4},ie=v(e=>o.jsx(ze,F({disableGutters:!0,elevation:0,square:!0},e)))(({theme:e})=>({border:`1px solid ${e.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&::before":{display:"none"}})),ce=v(e=>o.jsx(co,F({expandIcon:o.jsx(ge,{sx:{fontSize:"0.9rem"}})},e)))(({theme:e})=>({backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:e.spacing(1)}})),de=v(Xe)(({theme:e})=>({padding:e.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}));function Xo(){let e=k(n=>n.bookingsSliceReducer.price);const t=k(n=>n.bookingsSliceReducer.date),r=k(n=>n.bookingsSliceReducer.roomName),s=k(n=>n.bookingsSliceReducer.roomCategory),d=k(n=>n.bookingsSliceReducer.bookingLocation),c=k(n=>n.bookingsSliceReducer.selectedSlots),[u,i]=g.useState(!1),l=Ne(),[w,h]=g.useState(0),[C,S]=g.useState(!1),{updateDoc:A,error:B}=je();ye();const j=[{to:"/dashboard",title:"Home"},{to:"/location",title:d},{to:"/category",title:s},{to:"/bookings",title:r},{to:"/bookingslot",title:"Booking Slots"},{to:"/payment_summary",title:"Payment Summary"}],{data:f,isLoading:x}=ve("/novelite.api.api.getAllData");g.useEffect(()=>{let n;f&&(n=Object.values(f.message.reduce((p,{name:m,room:M,from_time:te,to_time:re,booking_date:xe})=>(p[m]?p[m].booking_timings+=`,${te} - ${re}`:p[m]={name:m,room:M,booking_timings:`${te} - ${re}`,booking_date:xe},p),{})));function W(p,m){if(p.size!==m.size)return!1;for(let M of p)if(!m.has(M))return!1;return!0}const I=new Set(c),ee=n==null?void 0:n.find(p=>{const m=new Set(p.booking_timings.split(","));return W(m,I)});if(ee){let p=ee.name;l(Ce(p)),Se.post("/api/method/novelite.api.api.create_qr_codes",{data:`{"id":"${p}", "location":"${d}", "booking_date":"${t}", "booking_timings":"${c}", "room_type":"${s}", "room":"${r}"}`}).then(m=>{A("Room Bookings",p,{qr_code:`data:image/png;base64,${m.data.message}`}).then(()=>{console.log("Added QR code to Doc")}).catch(M=>{console.log(M)})})}let q=localStorage.getItem("endTime");q||(q=new Date().getTime()+10*60*1e3,localStorage.setItem("endTime",q));const oe=setInterval(()=>{const p=new Date().getTime(),m=q-p;m<0?(clearInterval(oe),localStorage.removeItem("endTime"),h(0)):h(m)},1e3);return()=>clearInterval(oe)},[f,c]);const D=Math.floor(w%(1e3*60*60)/(1e3*60)),_=Math.floor(w%(1e3*60)/1e3),[R,O]=we.useState("panel1"),N=n=>(W,I)=>{O(I?n:!1)},T=()=>i(!0),L=()=>{i(!1),S(!1)},V=n=>S(n.target.checked),z=()=>{console.log(C)};return o.jsxs(Re,{title:"Payment Summary - Novel Office",children:[o.jsx(ke,{title:"Payment Summary",items:j}),o.jsx($,{bgcolor:"warning.light",textAlign:"center",children:o.jsxs(b,{justifyContent:"center",alignItems:"center",flexDirection:"row",children:[o.jsx($,{color:"warning.main",children:o.jsx(me,{sx:{marginRight:"0.5rem",marginBottom:"-0.4rem"}})}),o.jsxs(a,{color:"warning.main",m:1,variant:"h5",fontWeight:600,children:["Selected Slots will be blocked for ",D.toLocaleString("en-US",{minimumIntegerDigits:2}),":",_.toLocaleString("en-US",{minimumIntegerDigits:2})," mins"]})]})}),o.jsx($,{my:3,children:o.jsx(ae,{children:o.jsx(lo,{price:e,selectedSlots:c,tittle:"Payment Summary"})})}),o.jsxs($,{children:[o.jsx(ae,{children:o.jsxs(b,{children:[o.jsx(a,{variant:"h6",fontWeight:400,mb:2,children:"Payment Type"}),o.jsxs(ie,{expanded:R==="panel1",onChange:N("panel1"),children:[o.jsx(ce,{"aria-controls":"panel1d-content",id:"panel1d-header",children:o.jsx(a,{children:"Add to invoice"})}),o.jsxs(de,{children:[o.jsxs(a,{mb:2,children:["1)  Lorem ipsum dolor sit amet, consectetur adipiscing elit. ",o.jsx("br",{}),"2)  Suspendisse malesuada lacus ex, sit amet blandit leo lobortis eget. ",o.jsx("br",{}),"3)  Suspendisse malesuada lacus ex. Lorem ipsum dolor sit amet, consectetur adipiscing elit."]}),o.jsx(G,{variant:"contained",onClick:T,children:"Add to Invoice"})]})]}),o.jsxs(ie,{expanded:R==="panel2",onChange:N("panel2"),children:[o.jsx(ce,{"aria-controls":"panel2d-content",id:"panel2d-header",children:o.jsx(a,{children:"Pay now (Coming Soon)"})}),o.jsxs(de,{children:[o.jsx(a,{mb:2,children:"Comming Soon"}),o.jsx(G,{variant:"contained",disabled:!0,children:"Pay Now"})]})]})]})}),o.jsx(Pe,{open:u,onClose:L,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:o.jsxs($,{sx:bo,children:[o.jsxs(a,{mb:2,children:["1)  Lorem ipsum dolor sit amet, consectetur adipiscing elit. ",o.jsx("br",{}),"2)  Suspendisse malesuada lacus ex, sit amet blandit leo lobortis eget. ",o.jsx("br",{}),"3)  Suspendisse malesuada lacus ex. Lorem ipsum dolor sit amet, consectetur adipiscing elit.",o.jsx(Te,{required:!0,control:o.jsx(Ie,{onChange:n=>{V(n)}}),label:"I agree to terms and conditions"})]}),o.jsx(G,{variant:"contained",onClick:z,disabled:!C,children:"Confirm Bookings"})]})})]}),o.jsx(b,{direction:"row",justifyContent:"space-between",mt:2,children:o.jsx(G,{color:"secondary",variant:"contained",component:Ae,to:"/bookingslot",children:"Back"})})]})}export{Xo as default};
