var T=Object.defineProperty,_=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var W=(r,s,o)=>s in r?T(r,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[s]=o,g=(r,s)=>{for(var o in s||(s={}))V.call(s,o)&&W(r,o,s[o]);if(L)for(var o of L(s))q.call(s,o)&&W(r,o,s[o]);return r},f=(r,s)=>_(r,J(s));import{b as X,q as Z,r as m,j as e,a1 as E,a2 as I}from"./index-8b3b8eba.js";import{P as H}from"./PageContainer-d98636eb.js";import{C as u}from"./CustomFormLabel-f9953297.js";import{C as c}from"./CustomTextField-1c492d20.js";import{L as M}from"./Logo-a3921b73.js";import{k as Q,Q as x}from"./ReactToastify-98a908de.js";import{C as $}from"./CustomOutlinedInput-fde06834.js";import{X as K,_ as Y}from"./index.esm-eaeab6e7.js";import{B as n}from"./Box-7c985c27.js";import{G as P}from"./Grid-f4d7d3ed.js";import{C as ee}from"./Card-db1260bf.js";import{T as se}from"./Typography-1427830e.js";import{S as O}from"./Stack-6654f631.js";import{B as k}from"./Button-8cc464ae.js";import{I as te}from"./InputAdornment-2722becb.js";import{I as re}from"./IconButton-101c88e4.js";import{u as oe}from"./useDispatch-878c29d8.js";import"./TextField-3797edb5.js";import"./InputLabel-37dcdfba.js";import"./ListContext-b8157264.js";import"./useFormControl-b611f770.js";import"./ownerWindow-fbe9f185.js";import"./isMuiElement-107d3612.js";import"./useControlled-a5c8634c.js";import"./Select-3a5e17b2.js";import"./Modal-06095198.js";import"./useSlotProps-70f7ca87.js";import"./Paper-0f05f7b2.js";import"./createStack-ee48abd7.js";import"./styled-533bb9dc.js";const ie="/assets/novelite/client-dashboard/assets/SuccessSound-651080b1.wav",ae="/assets/novelite/client-dashboard/assets/WarningSound-830b2019.wav",ne="/assets/novelite/client-dashboard/assets/ErrorSound-57051b9e.wav";function Xe(){const r=X(),s=oe(),{currentUser:o,isValidating:le,isLoading:me,login:F,logout:ue,error:de,updateCurrentUser:ce,getUserCookie:he}=Z(),[U,pe]=m.useState(!1),[h,G]=m.useState(!1),[j,z]=m.useState({userEmail:"",password:""}),[b,A]=m.useState({userName:"",email:"",phoneNumber:""}),v=t=>x.success(t,{toastId:"success"}),B=t=>x.error(t,{toastId:"error"}),d=t=>x.warn(t,{toastId:"warn"}),C=m.useRef(null),w=m.useRef(null),y=m.useRef(null),S=t=>{const i=t.target.id,l=t.target.value.trim();z(f(g({},j),{[i]:l}))},D=t=>{t.preventDefault();const{userEmail:i,password:l}=j;i!==""&&l!==""?F(i,l).then(a=>{v("Logged in sucessfully"),C.current.play(),s(E(a.full_name)),console.log("Login User Name = ",a.full_name),s(I(i)),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({email:i})),console.log("inside then "+JSON.stringify(a)),setTimeout(()=>{r("/dashboard")},1500)}).catch(a=>{console.log("inside catch "+JSON.stringify(a.message)),B(a.message),y.current.play()}):(d("Please fill all the details"),w.current.play())},p=t=>{const i=t.target.id,l=t.target.value.trim();A(f(g({},b),{[i]:l}))},R=()=>{var t="^[0-9]+$";const{userName:i,email:l,phoneNumber:a}=b;if(i!==""&&l!==""&&a!=="")if(a.length!==10)d("Phone Number must contain 10 numbers");else if(!a.match(t))d("Please enter a valid phone number");else{let N={name:"Guest",email:"guest@mail.com"};s(E(N.name)),s(I(N.email)),v("Logging in as Guest"),setTimeout(()=>{r("/dashboard")},1500)}else d("Please fill all the details")};return e.jsxs(H,{title:"Login - Novel Office",description:"this is Login page",children:[e.jsxs(n,{sx:{position:"relative","&:before":{content:'""',background:"radial-gradient(#d2f1df, #d3d7fa, #bad8f4)",backgroundSize:"400% 400%",animation:"gradient 15s ease infinite",position:"absolute",height:"100%",width:"100%",opacity:"0.3"}},children:[e.jsx(P,{container:!0,spacing:0,justifyContent:"center",sx:{height:"100vh"},children:e.jsx(P,{item:!0,xs:12,sm:12,lg:5,xl:4,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(ee,{elevation:24,sx:{p:4,zIndex:1,width:"100%",maxWidth:{xs:"350px",md:"350px",lg:"450px"}},children:[e.jsx(n,{display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(M,{})}),e.jsxs(e.Fragment,{children:[e.jsx(se,{fontWeight:"700",variant:"h3",mb:1}),U?e.jsxs(n,{children:[e.jsxs(O,{children:[e.jsxs(n,{children:[e.jsx(u,{htmlFor:"userName",children:"Name"}),e.jsx(c,{id:"userName",variant:"outlined",fullWidth:!0,autoComplete:"userName",onChange:p})]}),e.jsxs(n,{children:[e.jsx(u,{htmlFor:"email",children:"Email"}),e.jsx(c,{id:"email",type:"email",variant:"outlined",fullWidth:!0,autoComplete:"email",onChange:p})]}),e.jsxs(n,{children:[e.jsx(u,{htmlFor:"phoneNumber",children:"Phone number"}),e.jsx(c,{id:"phoneNumber",type:"text",variant:"outlined",fullWidth:!0,autoComplete:"current-phoneNumber",onChange:p})]})]}),e.jsx(n,{mt:3,children:e.jsx(k,{color:"primary",variant:"contained",size:"large",fullWidth:!0,onClick:R,type:"submit",children:"Sign In As Guest"})})]}):e.jsxs("form",{children:[e.jsxs(O,{children:[e.jsxs(n,{children:[e.jsx(u,{htmlFor:"userEmail",children:"Email"}),e.jsx(c,{id:"userEmail",variant:"outlined",autoComplete:"userEmail",placeholder:"example@gmail.com",fullWidth:!0,onChange:S})]}),e.jsxs(n,{children:[e.jsx(u,{htmlFor:"password",children:"Password"}),e.jsx($,{type:h?"text":"password",endAdornment:e.jsx(te,{position:"end",children:e.jsx(re,{"aria-label":"toggle password visibility",onClick:()=>{G(!h)},edge:"end",children:h?e.jsx(K,{size:"20"}):e.jsx(Y,{size:"20"})})}),id:"password",onChange:S,placeholder:"*******",fullWidth:!0})]})]}),e.jsx(n,{mt:3,children:e.jsx(k,{color:"primary",variant:"contained",size:"large",fullWidth:!0,onClick:D,type:"submit",children:"Sign In"})})]})]})]})})}),e.jsx(Q,{position:"top-center",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]}),e.jsx("audio",{ref:C,src:ie}),e.jsx("audio",{ref:w,src:ae}),e.jsx("audio",{ref:y,src:ne})]})}export{Xe as default};
